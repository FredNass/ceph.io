---
title: "v13.2.7 mimic released"
date: "2019-11-25"
author: "dgalloway"
---

This is the seventh bugfix release of the Mimic v13.2.x long term stable release series. We recommend all Mimic users upgrade.

## Notable Changes

MDS:

- Cache trimming is now throttled. Dropping the MDS cache via the "ceph tell mds.<foo> cache drop" command or large reductions in the cache size will no longer cause service unavailability.
- Behavior with recalling caps has been significantly improved to not attempt recalling too many caps at once, leading to instability. MDS with a large cache (64GB+) should be more stable.
- MDS now provides a config option "mds\_max\_caps\_per\_client" (default: 1M) to limit the number of caps a client session may hold. Long running client sessions with a large number of caps have been a source of instability in the MDS when all of these caps need to be processed during certain session events. It is recommended to not unnecessarily increase this value.
- The "mds\_recall\_state\_timeout" config parameter has been removed. Late client recall warnings are now generated based on the number of caps the MDS has recalled which have not been released. The new config parameters "mds\_recall\_warning\_threshold" (default: 32K) and "mds\_recall\_warning\_decay\_rate" (default: 60s) set the threshold for this warning.
- The "cache drop" admin socket command has been removed. The "ceph tell mds.X cache drop" remains.

OSD:

- A health warning is now generated if the average osd heartbeat ping time exceeds a configurable threshold for any of the intervals computed. The OSD computes 1 minute, 5 minute and 15 minute intervals with average, minimum and maximum values. New configuration option "mon\_warn\_on\_slow\_ping\_ratio" specifies a percentage of "osd\_heartbeat\_grace" to determine the threshold. A value of zero disables the warning. A new configuration option "mon\_warn\_on\_slow\_ping\_time", specified in milliseconds, overrides the computed value, causing a warning when OSD heartbeat pings take longer than the specified amount. A new admin command "ceph daemon mgr.# dump\_osd\_network \[threshold\]" lists all connections with a ping time longer than the specified threshold or value determined by the config options, for the average for any of the 3 intervals. A new admin command ceph daemon osd.# dump\_osd\_network \[threshold\]" does the same but only including heartbeats initiated by the specified OSD.
- The default value of the "osd\_deep\_scrub\_large\_omap\_object\_key\_threshold" parameter has been lowered to detect an object with large number of omap keys more easily.

RGW:

- radosgw-admin introduces two subcommands that allow the managing of expire-stale objects that might be left behind after a bucket reshard in earlier versions of RGW. One subcommand lists such objects and the other deletes them. Read the troubleshooting section of the dynamic resharding docs for details.

## Changelog

- bluestore: 50-100% iops lost due to bluefs\_preextend\_wal\_files = false ([issue#40280](http://tracker.ceph.com/issues/40280), [pr#28574](https://github.com/ceph/ceph/pull/28574), Vitaliy Filippov)
- bluestore: Change default for bluestore\_fsck\_on\_mount\_deep as false ([pr#29699](https://github.com/ceph/ceph/pull/29699), Neha Ojha)
- bluestore: \_txc\_add\_transaction error (39) Directory not empty not handled on operation 21 (op 1, counting from 0) ([issue#39692](http://tracker.ceph.com/issues/39692), [pr#29217](https://github.com/ceph/ceph/pull/29217), Sage Weil)
- bluestore: apply shared\_alloc\_size to shared device with log level change ([pr#30219](https://github.com/ceph/ceph/pull/30219), Vikhyat Umrao, Josh Durgin, Sage Weil, Igor Fedotov)
- bluestore: avoid length overflow in extents returned by Stupid Allocator ([issue#40758](http://tracker.ceph.com/issues/40758), [issue#40703](http://tracker.ceph.com/issues/40703), [pr#29024](https://github.com/ceph/ceph/pull/29024), Igor Fedotov)
- bluestore: common/options: Set concurrent bluestore rocksdb compactions to 2 ([pr#30150](https://github.com/ceph/ceph/pull/30150), Mark Nelson)
- bluestore: default to bitmap allocator for bluestore/bluefs ([pr#28970](https://github.com/ceph/ceph/pull/28970), Igor Fedotov)
- bluestore: dump before "no-spanning blob id" abort ([pr#28029](https://github.com/ceph/ceph/pull/28029), Igor Fedotov)
- bluestore: fix >2GB bluefs writes ([pr#28967](https://github.com/ceph/ceph/pull/28967), Sage Weil, kungf)
- bluestore: fix duplicate allocations in bmap allocator ([issue#40080](http://tracker.ceph.com/issues/40080), [pr#28645](https://github.com/ceph/ceph/pull/28645), Igor Fedotov)
- bluestore: load OSD all compression settings unconditionally ([issue#40480](http://tracker.ceph.com/issues/40480), [pr#28894](https://github.com/ceph/ceph/pull/28894), Igor Fedotov)
- build/ops: Cython 0.29 removed support for subinterpreters: raises ImportError: Interpreter change detected ([issue#39593](http://tracker.ceph.com/issues/39593), [issue#39592](http://tracker.ceph.com/issues/39592), [pr#27971](https://github.com/ceph/ceph/pull/27971), Kefu Chai, Tim Serong)
- build/ops: admin/build-doc: use python3 ([pr#30663](https://github.com/ceph/ceph/pull/30663), Kefu Chai)
- build/ops: admin/build-doc: use python3 (follow-on fix) ([pr#30687](https://github.com/ceph/ceph/pull/30687), Nathan Cutler)
- build/ops: backport miscellaneous install-deps.sh and ceph.spec.in fixes from master ([issue#37707](http://tracker.ceph.com/issues/37707), [pr#30718](https://github.com/ceph/ceph/pull/30718), Jeff Layton, Kefu Chai, Nathan Cutler, Brad Hubbard, Changcheng Liu, Sebastian Wagner, Yunchuan Wen, Tomasz Setkowski, Zack Cerza)
- build/ops: ceph.spec.in: reserve 2500MB per build job ([pr#30355](https://github.com/ceph/ceph/pull/30355), Dan van der Ster)
- build/ops: cmake,run-make-check.sh: disable SPDK by default ([pr#30183](https://github.com/ceph/ceph/pull/30183), Kefu Chai)
- build/ops: cmake: detect armv8 crc and crypto feature using CHECK\_C\_COMPILER\_FLAG ([issue#17516](http://tracker.ceph.com/issues/17516), [pr#30713](https://github.com/ceph/ceph/pull/30713), Kefu Chai)
- build/ops: do\_cmake.sh: source not found ([issue#39981](http://tracker.ceph.com/issues/39981), [issue#40005](http://tracker.ceph.com/issues/40005), [pr#28217](https://github.com/ceph/ceph/pull/28217), Nathan Cutler)
- build/ops: fix build fail related to PYTHON\_EXECUTABLE variable ([pr#30260](https://github.com/ceph/ceph/pull/30260), Ilsoo Byun)
- build/ops: install-deps.sh: Remove CR repo ([issue#13997](http://tracker.ceph.com/issues/13997), [pr#30128](https://github.com/ceph/ceph/pull/30128), Alfredo Deza, Brad Hubbard)
- build/ops: install-deps.sh: install python\*-devel for python\*rpm-macros ([pr#30244](https://github.com/ceph/ceph/pull/30244), Kefu Chai)
- build/ops: make "patch" build dependency explicit ([issue#40269](http://tracker.ceph.com/issues/40269), [issue#40175](http://tracker.ceph.com/issues/40175), [pr#29150](https://github.com/ceph/ceph/pull/29150), Nathan Cutler)
- build/ops: python3-cephfs should provide python36-cephfs ([pr#30982](https://github.com/ceph/ceph/pull/30982), Kefu Chai)
- build/ops: rpm: always build ceph-test package ([pr#30188](https://github.com/ceph/ceph/pull/30188), Nathan Cutler)
- ceph-volume: PVolumes.filter shouldn't purge itself ([pr#30806](https://github.com/ceph/ceph/pull/30806), Rishabh Dave)
- ceph-volume: VolumeGroups.filter shouldn't purge itself ([pr#30808](https://github.com/ceph/ceph/pull/30808), Rishabh Dave)
- ceph-volume: add Ceph's device id to inventory ([pr#31211](https://github.com/ceph/ceph/pull/31211), Sebastian Wagner)
- ceph-volume: api/lvm: check if list of LVs is empty ([pr#31229](https://github.com/ceph/ceph/pull/31229), Rishabh Dave)
- ceph-volume: assume msgrV1 for all branches containing mimic ([pr#31615](https://github.com/ceph/ceph/pull/31615), Jan Fajerski)
- ceph-volume: batch functional idempotency test fails since message is now on stderr ([pr#29688](https://github.com/ceph/ceph/pull/29688), Jan Fajerski)
- ceph-volume: broken assertion errors after pytest changes ([pr#28948](https://github.com/ceph/ceph/pull/28948), Alfredo Deza)
- ceph-volume: do not fail when trying to remove crypt mapper ([pr#30555](https://github.com/ceph/ceph/pull/30555), Guillaume Abrioux)
- ceph-volume: does not recognize wal/db partitions created by ceph-disk ([pr#29463](https://github.com/ceph/ceph/pull/29463), Jan Fajerski)
- ceph-volume: ensure device lists are disjoint ([pr#30334](https://github.com/ceph/ceph/pull/30334), Jan Fajerski)
- ceph-volume: extend batch ([issue#40919](http://tracker.ceph.com/issues/40919), [pr#29243](https://github.com/ceph/ceph/pull/29243), Andrew Schoen, Jan Fajerski, SÃ©bastien Han, Volker Theile)
- ceph-volume: fix stderr failure to decode/encode when redirected ([pr#30301](https://github.com/ceph/ceph/pull/30301), Alfredo Deza)
- ceph-volume: fix warnings raised by pytest ([pr#30678](https://github.com/ceph/ceph/pull/30678), Rishabh Dave)
- ceph-volume: implement \_\_format\_\_ in Size to format sizes in py3 ([pr#30333](https://github.com/ceph/ceph/pull/30333), Jan Fajerski)
- ceph-volume: look for rotational data in lsblk ([pr#26991](https://github.com/ceph/ceph/pull/26991), Andrew Schoen)
- ceph-volume: lvm.activate: Return an error if WAL/DB devices absent ([pr#29039](https://github.com/ceph/ceph/pull/29039), David Casier)
- ceph-volume: lvm.zap fix cleanup for db partitions ([issue#40664](http://tracker.ceph.com/issues/40664), [pr#30303](https://github.com/ceph/ceph/pull/30303), Dominik Csapak)
- ceph-volume: minor optimizations related to class Volumes's use ([pr#30096](https://github.com/ceph/ceph/pull/30096), Rishabh Dave)
- ceph-volume: miscellaneous backports ([pr#31227](https://github.com/ceph/ceph/pull/31227), Mohamad Gebai, Andrew Schoen)
- ceph-volume: missing string substitution when reporting mounts ([issue#40977](http://tracker.ceph.com/issues/40977), [pr#29350](https://github.com/ceph/ceph/pull/29350), Shyukri Shyukriev)
- ceph-volume: more mimic backports ([pr#29631](https://github.com/ceph/ceph/pull/29631), Andrew Schoen, Alfredo Deza)
- ceph-volume: more missing mimic backports ([pr#31362](https://github.com/ceph/ceph/pull/31362), Mohamad Gebai, Kefu Chai)
- ceph-volume: pre-install python-apt and its variants before test runs ([pr#30295](https://github.com/ceph/ceph/pull/30295), Alfredo Deza)
- ceph-volume: prints errors to stdout with --format json ([issue#38548](http://tracker.ceph.com/issues/38548), [pr#29507](https://github.com/ceph/ceph/pull/29507), Jan Fajerski)
- ceph-volume: prints log messages to stdout ([pr#29602](https://github.com/ceph/ceph/pull/29602), Jan Fajerski, Alfredo Deza, Kefu Chai)
- ceph-volume: replace testinfra command with py.test ([pr#28930](https://github.com/ceph/ceph/pull/28930), Alfredo Deza)
- ceph-volume: simple functional tests drop test for lvm zap ([pr#29661](https://github.com/ceph/ceph/pull/29661), Jan Fajerski)
- ceph-volume: simple: when 'type' file is not present activate fails ([pr#29417](https://github.com/ceph/ceph/pull/29417), Jan Fajerski, Alfredo Deza)
- ceph-volume: tests add a sleep in tox for slow OSDs after booting ([pr#28947](https://github.com/ceph/ceph/pull/28947), Alfredo Deza)
- ceph-volume: tests set the noninteractive flag for Debian ([pr#29900](https://github.com/ceph/ceph/pull/29900), Alfredo Deza)
- ceph-volume: update testing playbook 'deploy.yml' ([pr#29074](https://github.com/ceph/ceph/pull/29074), Andrew Schoen, Guillaume Abrioux)
- ceph-volume: use the OSD identifier when reporting success ([pr#29770](https://github.com/ceph/ceph/pull/29770), Alfredo Deza)
- ceph-volume: zap always skips block.db, leaves them around ([issue#40664](http://tracker.ceph.com/issues/40664), [pr#30306](https://github.com/ceph/ceph/pull/30306), Alfredo Deza)
- ceph\_detect\_init: Add support for ALT Linux ([pr#27028](https://github.com/ceph/ceph/pull/27028), Andrey Bychkov)
- cephfs: MDSTableServer.cc: 83: FAILED assert(version == tid) ([issue#39212](http://tracker.ceph.com/issues/39212), [issue#38835](http://tracker.ceph.com/issues/38835), [pr#29222](https://github.com/ceph/ceph/pull/29222), "Yan, Zheng")
- cephfs: avoid map been inserted by mistake ([pr#29833](https://github.com/ceph/ceph/pull/29833), XiaoGuoDong2019)
- cephfs: ceph-fuse: client hang because its bad session PipeConnection to mds ([issue#39305](http://tracker.ceph.com/issues/39305), [issue#39685](http://tracker.ceph.com/issues/39685), [pr#29200](https://github.com/ceph/ceph/pull/29200), Guan yunfei)
- cephfs: client: EINVAL may be returned when offset is 0 ([pr#30932](https://github.com/ceph/ceph/pull/30932), wenpengLi)
- cephfs: client: \_readdir\_cache\_cb() may use the readdir\_cache already clear ([issue#41148](http://tracker.ceph.com/issues/41148), [pr#30933](https://github.com/ceph/ceph/pull/30933), huanwen ren)
- cephfs: client: add procession of SEEK\_HOLE and SEEK\_DATA in lseek ([pr#30918](https://github.com/ceph/ceph/pull/30918), Shen Hang)
- cephfs: client: bump ll\_ref from int32 to uint64\_t ([pr#29187](https://github.com/ceph/ceph/pull/29187), Xiaoxi CHEN)
- cephfs: client: ceph.dir.rctime xattr value incorrectly prefixes 09 to the nanoseconds component ([issue#40168](http://tracker.ceph.com/issues/40168), [pr#28501](https://github.com/ceph/ceph/pull/28501), David Disseldorp)
- cephfs: client: fix bad error handling in \_lookup\_parent ([issue#40085](http://tracker.ceph.com/issues/40085), [pr#29609](https://github.com/ceph/ceph/pull/29609), Jeff Layton)
- cephfs: client: nfs-ganesha with cephfs client, removing dir reports not empty ([issue#40746](http://tracker.ceph.com/issues/40746), [pr#30443](https://github.com/ceph/ceph/pull/30443), Peng Xie)
- cephfs: client: return -EIO when sync file which unsafe reqs have been dropped ([issue#40877](http://tracker.ceph.com/issues/40877), [pr#30241](https://github.com/ceph/ceph/pull/30241), simon gao)
- cephfs: client: set snapdir's link count to 1 ([pr#30108](https://github.com/ceph/ceph/pull/30108), "Yan, Zheng")
- cephfs: client: support the fallocate() when fuse version >= 2.9 ([issue#40615](http://tracker.ceph.com/issues/40615), [pr#30228](https://github.com/ceph/ceph/pull/30228), huanwen ren)
- cephfs: client: unlink dentry for inode with llref=0 ([issue#40960](http://tracker.ceph.com/issues/40960), [pr#29479](https://github.com/ceph/ceph/pull/29479), Xiaoxi CHEN)
- cephfs: fix a memory leak ([pr#29915](https://github.com/ceph/ceph/pull/29915), XiaoGuoDong2019)
- cephfs: getattr on snap inode stuck ([issue#40437](http://tracker.ceph.com/issues/40437), [pr#29230](https://github.com/ceph/ceph/pull/29230), "Yan, Zheng")
- cephfs: kcephfs TestClientLimits.test\_client\_pin fails with client caps fell below min ([issue#38270](http://tracker.ceph.com/issues/38270), [issue#38687](http://tracker.ceph.com/issues/38687), [pr#29211](https://github.com/ceph/ceph/pull/29211), "Yan, Zheng")
- cephfs: mds: Fix duplicate client entries in eviction list ([pr#30950](https://github.com/ceph/ceph/pull/30950), Sidharth Anupkrishnan)
- cephfs: mds: avoid sending too many osd requests at once after mds restarts ([issue#40042](http://tracker.ceph.com/issues/40042), [issue#40028](http://tracker.ceph.com/issues/40028), [pr#28650](https://github.com/ceph/ceph/pull/28650), simon gao)
- cephfs: mds: behind on trimming and \[dentry\] was purgeable but no longer is! ([issue#39223](http://tracker.ceph.com/issues/39223), [issue#38679](http://tracker.ceph.com/issues/38679), [pr#29224](https://github.com/ceph/ceph/pull/29224), "Yan, Zheng")
- cephfs: mds: cannot switch mds state from standby-replay to active ([issue#40213](http://tracker.ceph.com/issues/40213), [pr#29232](https://github.com/ceph/ceph/pull/29232), "Yan, Zheng", simon gao)
- cephfs: mds: change how mds revoke stale caps ([issue#38043](http://tracker.ceph.com/issues/38043), [issue#17854](http://tracker.ceph.com/issues/17854), [pr#28585](https://github.com/ceph/ceph/pull/28585), "Yan, Zheng", Rishabh Dave)
- cephfs: mds: check dir fragment to split dir if mkdir makes it oversized ([issue#39689](http://tracker.ceph.com/issues/39689), [pr#28381](https://github.com/ceph/ceph/pull/28381), Erqi Chen)
- cephfs: mds: cleanup unneeded client\_snap\_caps when splitting snap inode ([issue#39987](http://tracker.ceph.com/issues/39987), [pr#30234](https://github.com/ceph/ceph/pull/30234), "Yan, Zheng")
- cephfs: mds: delay exporting directory whose pin value exceeds max rank id ([issue#40603](http://tracker.ceph.com/issues/40603), [pr#29940](https://github.com/ceph/ceph/pull/29940), Zhi Zhang)
- cephfs: mds: destroy reconnect msg when it is from non-existent session to avoid memory leak ([issue#40588](http://tracker.ceph.com/issues/40588), [pr#28796](https://github.com/ceph/ceph/pull/28796), Shen Hang)
- cephfs: mds: evict an unresponsive client only when another client wants its caps ([pr#30239](https://github.com/ceph/ceph/pull/30239), Rishabh Dave)
- cephfs: mds: fix SnapRealm::resolve\_snapname for long name ([issue#39472](http://tracker.ceph.com/issues/39472), [pr#28186](https://github.com/ceph/ceph/pull/28186), "Yan, Zheng")
- cephfs: mds: fix corner case of replaying open sessions ([pr#28579](https://github.com/ceph/ceph/pull/28579), "Yan, Zheng")
- cephfs: mds: high debug logging with many subtrees is slow ([issue#38875](http://tracker.ceph.com/issues/38875), [pr#29219](https://github.com/ceph/ceph/pull/29219), Rishabh Dave)
- cephfs: mds: make MDSIOContextBase delete itself when shutting down ([pr#30417](https://github.com/ceph/ceph/pull/30417), Xuehan Xu)
- cephfs: mds: mds\_cap\_revoke\_eviction\_timeout is not used to initialize Server::cap\_revoke\_eviction\_timeout ([issue#38844](http://tracker.ceph.com/issues/38844), [issue#39210](http://tracker.ceph.com/issues/39210), [pr#29220](https://github.com/ceph/ceph/pull/29220), simon gao)
- cephfs: mds: output lock state in format dump ([issue#39669](http://tracker.ceph.com/issues/39669), [issue#39645](http://tracker.ceph.com/issues/39645), [pr#28274](https://github.com/ceph/ceph/pull/28274), Zhi Zhang)
- cephfs: mds: remove cache drop admin socket command ([issue#38020](http://tracker.ceph.com/issues/38020), [issue#38099](http://tracker.ceph.com/issues/38099), [pr#29210](https://github.com/ceph/ceph/pull/29210), Patrick Donnelly)
- cephfs: mds: reset heartbeat during long-running loops in recovery ([issue#40222](http://tracker.ceph.com/issues/40222), [pr#28918](https://github.com/ceph/ceph/pull/28918), "Yan, Zheng")
- cephfs: mds: stopping MDS with a large cache (40+GB) causes it to miss heartbeats ([issue#38022](http://tracker.ceph.com/issues/38022), [issue#38129](http://tracker.ceph.com/issues/38129), [issue#37723](http://tracker.ceph.com/issues/37723), [issue#38131](http://tracker.ceph.com/issues/38131), [pr#28452](https://github.com/ceph/ceph/pull/28452), Patrick Donnelly)
- cephfs: mds: there is an assertion when calling Beacon::shutdown() ([issue#39215](http://tracker.ceph.com/issues/39215), [issue#38822](http://tracker.ceph.com/issues/38822), [pr#29223](https://github.com/ceph/ceph/pull/29223), huanwen ren)
- cephfs: mount.ceph.c: do not pass nofail to the kernel ([issue#39233](http://tracker.ceph.com/issues/39233), [pr#28090](https://github.com/ceph/ceph/pull/28090), Kenneth Waegeman)
- cephfs: mount.ceph: properly handle -o strictatime ([pr#30240](https://github.com/ceph/ceph/pull/30240), Jeff Layton)
- cephfs: mount: key parsing fail when doing a remount ([issue#40165](http://tracker.ceph.com/issues/40165), [pr#29225](https://github.com/ceph/ceph/pull/29225), Luis Henriques)
- cephfs: pybind: added lseek() ([issue#39679](http://tracker.ceph.com/issues/39679), [pr#28337](https://github.com/ceph/ceph/pull/28337), Xiaowei Chu)
- cephfs: test\_volume\_client: fix test\_put\_object\_versioned() ([issue#39405](http://tracker.ceph.com/issues/39405), [issue#39510](http://tracker.ceph.com/issues/39510), [pr#30236](https://github.com/ceph/ceph/pull/30236), Rishabh Dave)
- common/ceph\_context: avoid unnecessary wait during service thread shutdown ([pr#31096](https://github.com/ceph/ceph/pull/31096), Jason Dillaman)
- common/options.cc: Lower the default value of osd\_deep\_scrub\_large\_omap\_object\_key\_threshold ([pr#29174](https://github.com/ceph/ceph/pull/29174), Neha Ojha)
- common/util: handle long lines in /proc/cpuinfo ([issue#39475](http://tracker.ceph.com/issues/39475), [issue#38296](http://tracker.ceph.com/issues/38296), [pr#28206](https://github.com/ceph/ceph/pull/28206), Sage Weil)
- common: Keyrings created by ceph auth get are not suitable for ceph auth import ([issue#22227](http://tracker.ceph.com/issues/22227), [issue#40547](http://tracker.ceph.com/issues/40547), [pr#28741](https://github.com/ceph/ceph/pull/28741), Kefu Chai)
- common: data race in OutputDataSocket ([issue#40268](http://tracker.ceph.com/issues/40268), [issue#40188](http://tracker.ceph.com/issues/40188), [pr#29201](https://github.com/ceph/ceph/pull/29201), Casey Bodley)
- common: parse ISO 8601 datetime format ([issue#40088](http://tracker.ceph.com/issues/40088), [pr#28326](https://github.com/ceph/ceph/pull/28326), Sage Weil)
- core: .mgrstat failed to decode mgrstat state; luminous dev version? ([issue#38852](http://tracker.ceph.com/issues/38852), [issue#38839](http://tracker.ceph.com/issues/38839), [pr#29249](https://github.com/ceph/ceph/pull/29249), Sage Weil)
- core: Better default value for osd\_snap\_trim\_sleep ([pr#29732](https://github.com/ceph/ceph/pull/29732), Neha Ojha)
- core: Health warnings on long network ping times ([issue#40640](http://tracker.ceph.com/issues/40640), [issue#40586](http://tracker.ceph.com/issues/40586), [pr#30225](https://github.com/ceph/ceph/pull/30225), xie xingguo, David Zafman)
- core: ceph daemon mon.a config set mon\_health\_to\_clog false cause leader mon assert ([issue#39625](http://tracker.ceph.com/issues/39625), [pr#29741](https://github.com/ceph/ceph/pull/29741), huangjun)
- core: crc cache should be invalidated when posting preallocated rx buffers ([issue#38437](http://tracker.ceph.com/issues/38437), [pr#29247](https://github.com/ceph/ceph/pull/29247), Ilya Dryomov)
- core: lazy omap stat collection ([pr#29189](https://github.com/ceph/ceph/pull/29189), Brad Hubbard)
- core: mon, osd: parallel clean\_pg\_upmaps ([issue#40104](http://tracker.ceph.com/issues/40104), [issue#40230](http://tracker.ceph.com/issues/40230), [pr#28619](https://github.com/ceph/ceph/pull/28619), xie xingguo)
- core: mon,osd: limit MOSDMap messages by size as well as map count ([issue#38277](http://tracker.ceph.com/issues/38277), [issue#38040](http://tracker.ceph.com/issues/38040), [pr#29242](https://github.com/ceph/ceph/pull/29242), Sage Weil)
- core: mon/AuthMonitor: fix initial creation of rotating keys ([issue#40634](http://tracker.ceph.com/issues/40634), [pr#30181](https://github.com/ceph/ceph/pull/30181), Sage Weil)
- core: mon/MDSMonitor: use stringstream instead of dout for mds repaired ([issue#40472](http://tracker.ceph.com/issues/40472), [pr#30235](https://github.com/ceph/ceph/pull/30235), Zhi Zhang)
- core: mon/MgrMonitor: fix null deref when invalid formatter is specified ([pr#29593](https://github.com/ceph/ceph/pull/29593), Sage Weil)
- core: mon/OSDMonitor.cc: better error message about min\_size ([pr#29618](https://github.com/ceph/ceph/pull/29618), Neha Ojha)
- core: mon/OSDMonitor: trim not-longer-exist failure reporters ([pr#30903](https://github.com/ceph/ceph/pull/30903), NancySu05)
- core: mon: C\_AckMarkedDown has not handled the Callback Arguments ([pr#30213](https://github.com/ceph/ceph/pull/30213), NancySu05)
- core: mon: ensure prepare\_failure() marks no\_reply on op ([pr#30481](https://github.com/ceph/ceph/pull/30481), Joao Eduardo Luis)
- core: mon: paxos: introduce new reset\_pending\_committing\_finishers for safety ([issue#39744](http://tracker.ceph.com/issues/39744), [issue#39484](http://tracker.ceph.com/issues/39484), [pr#28540](https://github.com/ceph/ceph/pull/28540), Greg Farnum)
- core: mon: show pool id in pool ls command ([issue#40287](http://tracker.ceph.com/issues/40287), [pr#30485](https://github.com/ceph/ceph/pull/30485), Chang Liu)
- core: osd beacon sometimes has empty pg list ([issue#40464](http://tracker.ceph.com/issues/40464), [issue#40377](http://tracker.ceph.com/issues/40377), [pr#29253](https://github.com/ceph/ceph/pull/29253), Sage Weil)
- core: osd/OSD.cc: make osd bench description consistent with parameters ([issue#39374](http://tracker.ceph.com/issues/39374), [issue#39006](http://tracker.ceph.com/issues/39006), [pr#28097](https://github.com/ceph/ceph/pull/28097), Neha Ojha)
- core: osd/OSDCap: Check for empty namespace ([issue#40835](http://tracker.ceph.com/issues/40835), [pr#30214](https://github.com/ceph/ceph/pull/30214), Brad Hubbard)
- core: osd/OSDMap: Replace get\_out\_osds with get\_out\_existing\_osds ([issue#39422](http://tracker.ceph.com/issues/39422), [issue#39154](http://tracker.ceph.com/issues/39154), [pr#28142](https://github.com/ceph/ceph/pull/28142), Brad Hubbard)
- core: osd/OSDMap: do not trust partially simplified pg\_upmap\_item ([pr#30898](https://github.com/ceph/ceph/pull/30898), xie xingguo)
- core: osd/PG: Add PG to large omap log message ([pr#30924](https://github.com/ceph/ceph/pull/30924), Brad Hubbard)
- core: osd/PG: fix last\_complete re-calculation on splitting ([issue#39538](http://tracker.ceph.com/issues/39538), [issue#26958](http://tracker.ceph.com/issues/26958), [pr#28259](https://github.com/ceph/ceph/pull/28259), xie xingguo)
- core: osd/PeeringState: do not complain about past\_intervals constrained by oldest epoch ([pr#30222](https://github.com/ceph/ceph/pull/30222), Sage Weil)
- core: osd/PeeringState: recover\_got - add special handler for empty log ([pr#30895](https://github.com/ceph/ceph/pull/30895), xie xingguo)
- core: osd/PrimaryLogPG: Avoid accessing destroyed references in finish\_degrâ¦ ([pr#30291](https://github.com/ceph/ceph/pull/30291), Tao Ning)
- core: osd/PrimaryLogPG: skip obcs that don't exist during backfill scan\_range ([pr#31029](https://github.com/ceph/ceph/pull/31029), Sage Weil)
- core: osd/PrimaryLogPG: update oi.size on write op implicitly truncating obâ¦ ([pr#30275](https://github.com/ceph/ceph/pull/30275), xie xingguo)
- core: osd: Better error message when OSD count is less than osd\_pool\_default\_size ([issue#38617](http://tracker.ceph.com/issues/38617), [pr#30180](https://github.com/ceph/ceph/pull/30180), Kefu Chai, Sage Weil, zjh)
- core: osd: Don't evict after a flush if intersecting scrub range ([issue#38840](http://tracker.ceph.com/issues/38840), [issue#39518](http://tracker.ceph.com/issues/39518), [pr#28232](https://github.com/ceph/ceph/pull/28232), David Zafman)
- core: osd: Don't include user changeable flag in snaptrim related assert ([issue#38124](http://tracker.ceph.com/issues/38124), [issue#39698](http://tracker.ceph.com/issues/39698), [pr#28202](https://github.com/ceph/ceph/pull/28202), David Zafman)
- core: osd: Fix for compatibility of encode/decode of osd\_stat\_t ([pr#31275](https://github.com/ceph/ceph/pull/31275), Kefu Chai, David Zafman)
- core: osd: Include dups in copy\_after() and copy\_up\_to() ([issue#39304](http://tracker.ceph.com/issues/39304), [pr#28089](https://github.com/ceph/ceph/pull/28089), David Zafman)
- core: osd: Output Base64 encoding of CRC header if binary data present ([issue#39737](http://tracker.ceph.com/issues/39737), [pr#28503](https://github.com/ceph/ceph/pull/28503), David Zafman)
- core: osd: Remove unused osdmap flags full, nearfull from output ([pr#30901](https://github.com/ceph/ceph/pull/30901), David Zafman)
- core: osd: clear PG\_STATE\_CLEAN when repair object ([pr#30243](https://github.com/ceph/ceph/pull/30243), Zengran Zhang)
- core: osd: fix build\_incremental\_map\_msg ([issue#38282](http://tracker.ceph.com/issues/38282), [pr#31236](https://github.com/ceph/ceph/pull/31236), Sage Weil)
- core: osd: make project\_pg\_history handle concurrent osdmap publish ([issue#26970](http://tracker.ceph.com/issues/26970), [pr#29976](https://github.com/ceph/ceph/pull/29976), Sage Weil)
- core: osd: merge replica log on primary need according to replica log's crt ([pr#30916](https://github.com/ceph/ceph/pull/30916), Zengran Zhang)
- core: osd: pg stuck in backfill\_wait with plenty of disk space ([issue#38034](http://tracker.ceph.com/issues/38034), [pr#28201](https://github.com/ceph/ceph/pull/28201), xie xingguo, David Zafman)
- core: osd: report omap/data/metadata usage ([issue#40639](http://tracker.ceph.com/issues/40639), [pr#28852](https://github.com/ceph/ceph/pull/28852), Sage Weil)
- core: osd: rollforward may need to mark pglog dirty ([issue#40403](http://tracker.ceph.com/issues/40403), [pr#31035](https://github.com/ceph/ceph/pull/31035), Zengran Zhang)
- core: osd: scrub error on big objects; make bluestore refuse to start on big objects ([pr#30784](https://github.com/ceph/ceph/pull/30784), David Zafman, Sage Weil)
- core: osd: take heartbeat\_lock when calling heartbeat() ([issue#39513](http://tracker.ceph.com/issues/39513), [issue#39439](http://tracker.ceph.com/issues/39439), [pr#28220](https://github.com/ceph/ceph/pull/28220), Sage Weil)
- core: osds allows to partially start more than N+2 ([issue#38206](http://tracker.ceph.com/issues/38206), [issue#38076](http://tracker.ceph.com/issues/38076), [pr#29241](https://github.com/ceph/ceph/pull/29241), Sage Weil)
- core: should report EINVAL in ErasureCode::parse() if m<=0 ([issue#38682](http://tracker.ceph.com/issues/38682), [issue#38751](http://tracker.ceph.com/issues/38751), [pr#28995](https://github.com/ceph/ceph/pull/28995), Sage Weil)
- core: should set EPOLLET flag on del\_event() ([issue#38856](http://tracker.ceph.com/issues/38856), [pr#29250](https://github.com/ceph/ceph/pull/29250), Roman Penyaev)
- doc/ceph-fuse: mention -k option in ceph-fuse man page ([pr#30936](https://github.com/ceph/ceph/pull/30936), Rishabh Dave)
- doc/rbd: s/guess/xml/ for codeblock lexer ([pr#31090](https://github.com/ceph/ceph/pull/31090), Kefu Chai)
- doc/rgw: document use of 'realm pull' instead of 'period pull' ([issue#39655](http://tracker.ceph.com/issues/39655), [pr#30131](https://github.com/ceph/ceph/pull/30131), Casey Bodley)
- doc: Document behaviour of fsync-after-close ([issue#24641](http://tracker.ceph.com/issues/24641), [pr#29765](https://github.com/ceph/ceph/pull/29765), Jos Collin, Jeff Layton)
- doc: Object Gateway multisite document read-only argument error ([issue#40497](http://tracker.ceph.com/issues/40497), [pr#29289](https://github.com/ceph/ceph/pull/29289), Chenjiong Deng)
- doc: default values for mon\_health\_to\_clog\_\* were flipped ([pr#30227](https://github.com/ceph/ceph/pull/30227), James McClune)
- doc: describe metadata\_heap cleanup ([issue#18174](http://tracker.ceph.com/issues/18174), [pr#30070](https://github.com/ceph/ceph/pull/30070), Dan van der Ster)
- doc: fix rgw\_ldap\_dnattr username token ([pr#30099](https://github.com/ceph/ceph/pull/30099), Thomas Kriechbaumer)
- doc: rgw: CreateBucketConfiguration for s3 PUT Bucket request ([issue#39602](http://tracker.ceph.com/issues/39602), [issue#39597](http://tracker.ceph.com/issues/39597), [pr#29257](https://github.com/ceph/ceph/pull/29257), Casey Bodley)
- doc: update bluestore cache settings and clarify data fraction ([issue#39522](http://tracker.ceph.com/issues/39522), [pr#31258](https://github.com/ceph/ceph/pull/31258), Jan Fajerski)
- doc: wrong value of usage log default in logging section ([issue#37891](http://tracker.ceph.com/issues/37891), [issue#37856](http://tracker.ceph.com/issues/37856), [pr#29014](https://github.com/ceph/ceph/pull/29014), Abhishek Lekshmanan)
- filestore: assure sufficient leaves in pre-split ([issue#39390](http://tracker.ceph.com/issues/39390), [pr#30182](https://github.com/ceph/ceph/pull/30182), Jeegn Chen)
- krbd: avoid udev netlink socket overrun and retry on transient errors from udev\_enumerate\_scan\_devices() ([pr#31322](https://github.com/ceph/ceph/pull/31322), Ilya Dryomov, Adam C. Emerson)
- krbd: fix rbd map hang due to udev return subsystem unordered ([issue#39089](http://tracker.ceph.com/issues/39089), [pr#30176](https://github.com/ceph/ceph/pull/30176), Zhi Zhang)
- mgr/balancer: fix fudge ([pr#28399](https://github.com/ceph/ceph/pull/28399), xie xingguo)
- mgr/balancer: python3 compatibility issue ([pr#31013](https://github.com/ceph/ceph/pull/31013), Mykola Golub)
- mgr/balancer: restrict automatic balancing to specific weekdays ([pr#26499](https://github.com/ceph/ceph/pull/26499), xie xingguo)
- mgr/crash: fix python3 invalid syntax problems ([pr#29029](https://github.com/ceph/ceph/pull/29029), Ricardo Dias)
- mgr/dashboard: Fix run-frontend-e2e-tests.sh ([issue#40707](http://tracker.ceph.com/issues/40707), [pr#28954](https://github.com/ceph/ceph/pull/28954), Kiefer Chang, Tiago Melo)
- mgr/dashboard: Fix various RGW issues ([pr#28210](https://github.com/ceph/ceph/pull/28210), Volker Theile)
- mgr/dashboard: RGW proxy can't handle self-signed SSL certificates ([pr#30543](https://github.com/ceph/ceph/pull/30543), Volker Theile)
- mgr/dashboard: cephfs multimds graphs stack together ([issue#40660](http://tracker.ceph.com/issues/40660), [pr#28911](https://github.com/ceph/ceph/pull/28911), Kiefer Chang)
- mgr/localpool: pg\_num is an int arg to 'osd pool create' ([pr#30447](https://github.com/ceph/ceph/pull/30447), Sage Weil)
- mgr/prometheus: Cast collect\_timeout (scrape\_interval) to float ([pr#31108](https://github.com/ceph/ceph/pull/31108), Ben Meekhof)
- mgr/prometheus: replace whitespaces in metrics' names ([issue#39458](http://tracker.ceph.com/issues/39458), [pr#28165](https://github.com/ceph/ceph/pull/28165), Alfonso MartÃ­nez)
- mgr/telemetry: Ignore crashes in report when module not enabled ([pr#30846](https://github.com/ceph/ceph/pull/30846), Wido den Hollander)
- mgr: DaemonServer::handle\_conf\_change - broken locking ([issue#38899](http://tracker.ceph.com/issues/38899), [issue#38963](http://tracker.ceph.com/issues/38963), [pr#29197](https://github.com/ceph/ceph/pull/29197), xie xingguo)
- mgr: deadlock ([issue#39040](http://tracker.ceph.com/issues/39040), [issue#39426](http://tracker.ceph.com/issues/39426), [pr#28161](https://github.com/ceph/ceph/pull/28161), xie xingguo)
- mgr: do not reset reported if a new metric is not collected ([pr#30391](https://github.com/ceph/ceph/pull/30391), Ilsoo Byun)
- radosgw-admin: bucket sync status not 'caught up' during full sync ([issue#40806](http://tracker.ceph.com/issues/40806), [pr#30170](https://github.com/ceph/ceph/pull/30170), Casey Bodley)
- rbd-mirror: cannot restore deferred deletion mirrored images ([pr#30828](https://github.com/ceph/ceph/pull/30828), Jason Dillaman, Mykola Golub)
- rbd-mirror: clear out bufferlist prior to listing mirror images ([issue#39461](http://tracker.ceph.com/issues/39461), [issue#39407](http://tracker.ceph.com/issues/39407), [pr#28123](https://github.com/ceph/ceph/pull/28123), Jason Dillaman)
- rbd-mirror: don't overwrite status error returned by replay ([pr#29872](https://github.com/ceph/ceph/pull/29872), Mykola Golub)
- rbd-mirror: handle duplicates in image sync throttler queue ([issue#40519](http://tracker.ceph.com/issues/40519), [issue#40593](http://tracker.ceph.com/issues/40593), [pr#28815](https://github.com/ceph/ceph/pull/28815), Mykola Golub)
- rbd-mirror: ignore errors relating to parsing the cluster config file ([pr#30117](https://github.com/ceph/ceph/pull/30117), Jason Dillaman)
- rbd/action: fix error getting positional argument ([issue#40095](http://tracker.ceph.com/issues/40095), [pr#29294](https://github.com/ceph/ceph/pull/29294), songweibin)
- rbd/tests: avoid hexdump skip and length options in krbd test ([pr#30569](https://github.com/ceph/ceph/pull/30569), Ilya Dryomov)
- rbd: Reduce log level for cls/journal and cls/rbd expected errors ([issue#40865](http://tracker.ceph.com/issues/40865), [pr#29565](https://github.com/ceph/ceph/pull/29565), Jason Dillaman)
- rbd: filter out group/trash snapshots from snap\_list ([issue#38538](http://tracker.ceph.com/issues/38538), [issue#39186](http://tracker.ceph.com/issues/39186), [pr#28138](https://github.com/ceph/ceph/pull/28138), songweibin, Jason Dillaman)
- rbd: journal: properly advance read offset after skipping invalid range ([pr#28814](https://github.com/ceph/ceph/pull/28814), Mykola Golub)
- rbd: librbd: add missing shutdown states to managed lock helper ([issue#38387](http://tracker.ceph.com/issues/38387), [issue#38509](http://tracker.ceph.com/issues/38509), [pr#28151](https://github.com/ceph/ceph/pull/28151), Jason Dillaman)
- rbd: librbd: async open/close should free ImageCtx before issuing callback ([issue#39429](http://tracker.ceph.com/issues/39429), [issue#39031](http://tracker.ceph.com/issues/39031), [pr#28125](https://github.com/ceph/ceph/pull/28125), Jason Dillaman)
- rbd: librbd: avoid dereferencing an empty container during deep-copy ([issue#40368](http://tracker.ceph.com/issues/40368), [pr#30177](https://github.com/ceph/ceph/pull/30177), Jason Dillaman)
- rbd: librbd: disable image mirroring when moving to trash ([pr#28150](https://github.com/ceph/ceph/pull/28150), Mykola Golub)
- rbd: librbd: ensure compare-and-write doesn't skip compare after copyup ([issue#38383](http://tracker.ceph.com/issues/38383), [issue#38441](http://tracker.ceph.com/issues/38441), [pr#28133](https://github.com/ceph/ceph/pull/28133), Ilya Dryomov)
- rbd: librbd: properly handle potential object map failures ([issue#39952](http://tracker.ceph.com/issues/39952), [issue#36074](http://tracker.ceph.com/issues/36074), [pr#30796](https://github.com/ceph/ceph/pull/30796), Jason Dillaman, Mykola Golub)
- rbd: librbd: properly track in-flight flush requests ([issue#40573](http://tracker.ceph.com/issues/40573), [pr#28770](https://github.com/ceph/ceph/pull/28770), Jason Dillaman)
- rbd: librbd: race condition possible when validating RBD pool ([issue#38500](http://tracker.ceph.com/issues/38500), [issue#38563](http://tracker.ceph.com/issues/38563), [pr#28139](https://github.com/ceph/ceph/pull/28139), Jason Dillaman)
- rbd: use the ordered throttle for the export action ([issue#40435](http://tracker.ceph.com/issues/40435), [pr#30178](https://github.com/ceph/ceph/pull/30178), Jason Dillaman)
- restful: Query nodes\_by\_id for items ([pr#31273](https://github.com/ceph/ceph/pull/31273), Boris Ranto)
- rgw admin: disable stale instance delete in a multiste env ([pr#30340](https://github.com/ceph/ceph/pull/30340), Abhishek Lekshmanan)
- rgw/OutputDataSocket: append\_output(buffer::list&) says it will (but does not) discard output at data\_max\_backlog ([issue#40178](http://tracker.ceph.com/issues/40178), [issue#40351](http://tracker.ceph.com/issues/40351), [pr#29279](https://github.com/ceph/ceph/pull/29279), Matt Benjamin)
- rgw/cls: keep issuing bilog trim ops after reset ([issue#40187](http://tracker.ceph.com/issues/40187), [pr#30074](https://github.com/ceph/ceph/pull/30074), Casey Bodley)
- rgw/multisite: Don't allow certain radosgw-admin commands to run on non-master zone ([issue#39548](http://tracker.ceph.com/issues/39548), [pr#30133](https://github.com/ceph/ceph/pull/30133), Shilpa Jagannath)
- rgw/rgw\_op: Remove get\_val from hotpath via legacy options ([pr#30141](https://github.com/ceph/ceph/pull/30141), Mark Nelson)
- rgw: Add support for --bypass-gc flag of radosgw-admin bucket rm command in RGW Multi-site ([issue#39748](http://tracker.ceph.com/issues/39748), [issue#24991](http://tracker.ceph.com/issues/24991), [pr#29262](https://github.com/ceph/ceph/pull/29262), Casey Bodley)
- rgw: Don't crash on copy when metadata directive not supplied ([issue#40416](http://tracker.ceph.com/issues/40416), [pr#29500](https://github.com/ceph/ceph/pull/29500), Adam C. Emerson)
- rgw: Fix bucket versioning vs. swift metadata bug ([pr#30140](https://github.com/ceph/ceph/pull/30140), Marcus Watts)
- rgw: Fix rgw decompression log-print ([pr#30156](https://github.com/ceph/ceph/pull/30156), Han Fengzhe)
- rgw: Multisite sync corruption for large multipart obj ([issue#40144](http://tracker.ceph.com/issues/40144), [pr#29273](https://github.com/ceph/ceph/pull/29273), Casey Bodley, Tianshan Qu, Xiaoxi CHEN)
- rgw: RGWCoroutine::call(nullptr) sets retcode=0 ([pr#30159](https://github.com/ceph/ceph/pull/30159), Casey Bodley)
- rgw: Return tenant field in bucket\_stats function ([issue#40038](http://tracker.ceph.com/issues/40038), [pr#28209](https://github.com/ceph/ceph/pull/28209), Volker Theile)
- rgw: S3 policy evaluated incorrectly ([issue#38638](http://tracker.ceph.com/issues/38638), [issue#39274](http://tracker.ceph.com/issues/39274), [pr#29255](https://github.com/ceph/ceph/pull/29255), Pritha Srivastava)
- rgw: Save an unnecessary copy of RGWEnv ([pr#29483](https://github.com/ceph/ceph/pull/29483), Mark Kogan)
- rgw: Swift interface: server side copy fails if object name contains '?' ([issue#27217](http://tracker.ceph.com/issues/27217), [issue#40128](http://tracker.ceph.com/issues/40128), [pr#29267](https://github.com/ceph/ceph/pull/29267), Casey Bodley)
- rgw: TempURL should not allow PUTs with the X-Object-Manifest ([issue#40133](http://tracker.ceph.com/issues/40133), [issue#20797](http://tracker.ceph.com/issues/20797), [pr#28711](https://github.com/ceph/ceph/pull/28711), Radoslaw Zarzynski)
- rgw: abort multipart fix ([pr#29016](https://github.com/ceph/ceph/pull/29016), J. Eric Ivancich)
- rgw: asio: check the remote endpoint before processing requests ([pr#30977](https://github.com/ceph/ceph/pull/30977), Abhishek Lekshmanan)
- rgw: conditionally allow builtin users with non-unique email addresses ([issue#40089](http://tracker.ceph.com/issues/40089), [issue#40507](http://tracker.ceph.com/issues/40507), [pr#28716](https://github.com/ceph/ceph/pull/28716), Matt Benjamin)
- rgw: data/bilogs are trimmed when no peers are reading them ([issue#39487](http://tracker.ceph.com/issues/39487), [pr#30130](https://github.com/ceph/ceph/pull/30130), Casey Bodley)
- rgw: datalog/mdlog trim commands loop until done ([pr#30868](https://github.com/ceph/ceph/pull/30868), Casey Bodley)
- rgw: do necessary checking of website configuration ([issue#40678](http://tracker.ceph.com/issues/40678), [pr#30980](https://github.com/ceph/ceph/pull/30980), Enming Zhang)
- rgw: don't throw when accept errors are happening on frontend ([pr#30154](https://github.com/ceph/ceph/pull/30154), Yuval Lifshitz)
- rgw: fix CreateBucket with BucketLocation parameter failed under default zonegroup ([pr#30171](https://github.com/ceph/ceph/pull/30171), Enming Zhang)
- rgw: fix bucket may redundantly list keys after BI\_PREFIX\_CHAR ([issue#40147](http://tracker.ceph.com/issues/40147), [issue#39984](http://tracker.ceph.com/issues/39984), [pr#28409](https://github.com/ceph/ceph/pull/28409), Casey Bodley, Tianshan Qu)
- rgw: fix cls\_bucket\_list\_unordered() partial results ([pr#30253](https://github.com/ceph/ceph/pull/30253), Mark Kogan)
- rgw: fix data sync start delay if remote haven't init data\_log ([pr#30510](https://github.com/ceph/ceph/pull/30510), Tianshan Qu)
- rgw: fix drain handles error when deleting bucket with bypass-gc option ([pr#29984](https://github.com/ceph/ceph/pull/29984), dongdong tao)
- rgw: fix list bucket with delimiter wrongly skip some special keys ([issue#40905](http://tracker.ceph.com/issues/40905), [pr#30168](https://github.com/ceph/ceph/pull/30168), Tianshan Qu)
- rgw: fix list versions starts with version\_id=null ([pr#30775](https://github.com/ceph/ceph/pull/30775), Tianshan Qu)
- rgw: fix potential realm watch lost ([issue#40991](http://tracker.ceph.com/issues/40991), [pr#30167](https://github.com/ceph/ceph/pull/30167), Tianshan Qu)
- rgw: fix race b/w bucket reshard and ops waiting on reshard completion ([pr#29139](https://github.com/ceph/ceph/pull/29139), J. Eric Ivancich)
- rgw: fix refcount tags to match and update object's idtag ([pr#30891](https://github.com/ceph/ceph/pull/30891), J. Eric Ivancich)
- rgw: fixed "unrecognized arg" error when using "radosgw-admin zone rm" ([pr#30172](https://github.com/ceph/ceph/pull/30172), Hongang Chen)
- rgw: gc remove tag after all sub io finish ([issue#40903](http://tracker.ceph.com/issues/40903), [pr#30173](https://github.com/ceph/ceph/pull/30173), Tianshan Qu)
- rgw: housekeeping of reset stats operation in radosgw-admin and cls back-end ([pr#30165](https://github.com/ceph/ceph/pull/30165), J. Eric Ivancich)
- rgw: increase beast parse buffer size to 64k ([pr#30450](https://github.com/ceph/ceph/pull/30450), Casey Bodley)
- rgw: ldap auth: S3 auth failure should return InvalidAccessKeyId ([pr#30652](https://github.com/ceph/ceph/pull/30652), Matt Benjamin)
- rgw: make dns hostnames matching case insensitive ([issue#40995](http://tracker.ceph.com/issues/40995), [pr#30166](https://github.com/ceph/ceph/pull/30166), Casey Bodley, Abhishek Lekshmanan)
- rgw: mitigate bucket list with max-entries excessively high ([pr#30134](https://github.com/ceph/ceph/pull/30134), J. Eric Ivancich)
- rgw: multisite: 'radosgw-admin bucket sync status' should call syncs\_from(source.name) instead of id ([issue#40022](http://tracker.ceph.com/issues/40022), [issue#40141](http://tracker.ceph.com/issues/40141), [pr#29270](https://github.com/ceph/ceph/pull/29270), Casey Bodley)
- rgw: multisite: RGWListBucketIndexesCR for data full sync needs pagination ([issue#39551](http://tracker.ceph.com/issues/39551), [issue#40354](http://tracker.ceph.com/issues/40354), [pr#29284](https://github.com/ceph/ceph/pull/29284), Shilpa Jagannath)
- rgw: multisite: data sync loops back to the start of the datalog after reaching the end ([issue#39033](http://tracker.ceph.com/issues/39033), [issue#39074](http://tracker.ceph.com/issues/39074), [pr#29021](https://github.com/ceph/ceph/pull/29021), Casey Bodley)
- rgw: multisite: mismatch of bucket creation times from List Buckets ([issue#39635](http://tracker.ceph.com/issues/39635), [issue#39734](http://tracker.ceph.com/issues/39734), [pr#28483](https://github.com/ceph/ceph/pull/28483), Casey Bodley)
- rgw: multisite: overwrites in versioning-suspended buckets fail to sync ([issue#38080](http://tracker.ceph.com/issues/38080), [issue#37792](http://tracker.ceph.com/issues/37792), [pr#29017](https://github.com/ceph/ceph/pull/29017), Casey Bodley)
- rgw: multisite: period pusher gets 403 Forbidden against other zonegroups ([issue#39415](http://tracker.ceph.com/issues/39415), [issue#39287](http://tracker.ceph.com/issues/39287), [pr#29256](https://github.com/ceph/ceph/pull/29256), Casey Bodley)
- rgw: non-existent mdlog failures logged at level 0 ([issue#38747](http://tracker.ceph.com/issues/38747), [issue#40033](http://tracker.ceph.com/issues/40033), [pr#28757](https://github.com/ceph/ceph/pull/28757), Abhishek Lekshmanan)
- rgw: perfcounters: add gc retire counter ([pr#30073](https://github.com/ceph/ceph/pull/30073), Matt Benjamin)
- rgw: permit rgw-admin to populate user info by access-key ([pr#30105](https://github.com/ceph/ceph/pull/30105), Matt Benjamin, Marc Koderer)
- rgw: provide admin-friendly reshard status output ([issue#37615](http://tracker.ceph.com/issues/37615), [issue#40357](http://tracker.ceph.com/issues/40357), [pr#29285](https://github.com/ceph/ceph/pull/29285), Mark Kogan)
- rgw: remove\_olh\_pending\_entries() does not limit the number of xattrs to remove ([issue#39179](http://tracker.ceph.com/issues/39179), [issue#39118](http://tracker.ceph.com/issues/39118), [pr#28348](https://github.com/ceph/ceph/pull/28348), Casey Bodley)
- rgw: resharding of a versioned bucket causes a bucket stats discrepancy ([issue#39532](http://tracker.ceph.com/issues/39532), [pr#28249](https://github.com/ceph/ceph/pull/28249), J. Eric Ivancich)
- rgw: return ERR\_NO\_SUCH\_BUCKET early while evaluating bucket policy ([issue#38420](http://tracker.ceph.com/issues/38420), [issue#39697](http://tracker.ceph.com/issues/39697), [pr#28422](https://github.com/ceph/ceph/pull/28422), Abhishek Lekshmanan)
- rgw: rgw\_file: all directories are virtual with respect to contents ([issue#40262](http://tracker.ceph.com/issues/40262), [issue#40204](http://tracker.ceph.com/issues/40204), [pr#28887](https://github.com/ceph/ceph/pull/28887), Matt Benjamin)
- rgw: set null version object issues ([issue#36763](http://tracker.ceph.com/issues/36763), [issue#40360](http://tracker.ceph.com/issues/40360), [pr#29288](https://github.com/ceph/ceph/pull/29288), Tianshan Qu)
- rgw: support delimiter longer then one symbol ([issue#39989](http://tracker.ceph.com/issues/39989), [issue#38776](http://tracker.ceph.com/issues/38776), [pr#29018](https://github.com/ceph/ceph/pull/29018), Tianshan Qu, Matt Benjamin)
- rgw: swift object expiry fails when a bucket reshards ([issue#39741](http://tracker.ceph.com/issues/39741), [pr#29258](https://github.com/ceph/ceph/pull/29258), Casey Bodley, Abhishek Lekshmanan, J. Eric Ivancich)
- rgw: swift: refrain from corrupting static large objects when using nginx as a GET cache ([pr#30135](https://github.com/ceph/ceph/pull/30135), Andrey Groshev)
- rgw: the Multi-Object Delete operation of S3 API wrongly handles the Code response element ([issue#18241](http://tracker.ceph.com/issues/18241), [issue#40136](http://tracker.ceph.com/issues/40136), [pr#29268](https://github.com/ceph/ceph/pull/29268), Radoslaw Zarzynski)
- rgw: update resharding documentation ([issue#39047](http://tracker.ceph.com/issues/39047), [pr#29020](https://github.com/ceph/ceph/pull/29020), J. Eric Ivancich)
- rgw\_file: fix invalidation of top-level directories ([issue#40215](http://tracker.ceph.com/issues/40215), [pr#29276](https://github.com/ceph/ceph/pull/29276), Matt Benjamin)
- rgw\_file: advance\_mtime() should consider namespace expiration ([issue#40415](http://tracker.ceph.com/issues/40415), [pr#30660](https://github.com/ceph/ceph/pull/30660), Matt Benjamin)
- rgw\_file: fix readdir eof() calc--caller stop implies !eof and introduce fast S3 Unix stats (immutable) ([issue#40375](http://tracker.ceph.com/issues/40375), [issue#40456](http://tracker.ceph.com/issues/40456), [pr#30077](https://github.com/ceph/ceph/pull/30077), Matt Benjamin)
- rgw\_file: include tenant when hashing bucket names ([issue#40225](http://tracker.ceph.com/issues/40225), [issue#40118](http://tracker.ceph.com/issues/40118), [pr#29277](https://github.com/ceph/ceph/pull/29277), Matt Benjamin)
- rgw\_file: readdir: do not construct markers w/leading '/' ([pr#30157](https://github.com/ceph/ceph/pull/30157), Matt Benjamin)
- rgw\_file: save etag and acl info in setattr ([issue#39229](http://tracker.ceph.com/issues/39229), [pr#28073](https://github.com/ceph/ceph/pull/28073), Tao Chen)
- rpm: missing dependency on python34-ceph-argparse from python34-cephfs (and others?) ([issue#24918](http://tracker.ceph.com/issues/24918), [issue#24919](http://tracker.ceph.com/issues/24919), [issue#37613](http://tracker.ceph.com/issues/37613), [pr#27949](https://github.com/ceph/ceph/pull/27949), Kefu Chai)
- tests: cls\_rbd: removed mirror peer pool test cases ([pr#31485](https://github.com/ceph/ceph/pull/31485), Jason Dillaman)
- tests: librbd: set nbd timeout due to newer kernels defaulting it on ([pr#30424](https://github.com/ceph/ceph/pull/30424), Jason Dillaman)
- tests: ceph-disk: use a Python2.7 compatible version of pytest ([pr#31254](https://github.com/ceph/ceph/pull/31254), Alfredo Deza)
- tests: rgw: don't use ceph-ansible in s3a-hadoop suite ([issue#39706](http://tracker.ceph.com/issues/39706), [pr#30069](https://github.com/ceph/ceph/pull/30069), Casey Bodley)
- tests/workunits/rbd: wait for rbd-nbd unmap to complete ([issue#39598](http://tracker.ceph.com/issues/39598), [issue#39674](http://tracker.ceph.com/issues/39674), [pr#28310](https://github.com/ceph/ceph/pull/28310), Jason Dillaman)
- tests: fix issues in vstart runner ([pr#28208](https://github.com/ceph/ceph/pull/28208), Volker Theile)
- tests: limit loops waiting for force-backfill/force-recovery to happen ([issue#38351](http://tracker.ceph.com/issues/38351), [issue#38309](http://tracker.ceph.com/issues/38309), [pr#29245](https://github.com/ceph/ceph/pull/29245), David Zafman)
- tests: remove s3tests ! ([pr#31640](https://github.com/ceph/ceph/pull/31640), Yuri Weinstein)
- tests: cephfs: TestMisc.test\_evict\_client fails ([issue#40219](http://tracker.ceph.com/issues/40219), [pr#29228](https://github.com/ceph/ceph/pull/29228), "Yan, Zheng")
- tests: do not take ceph.conf.template from ceph/teuthology.git ([pr#30841](https://github.com/ceph/ceph/pull/30841), Sage Weil)
- tests: ignore expected MDS\_CLIENT\_LATE\_RELEASE warning ([issue#40968](http://tracker.ceph.com/issues/40968), [pr#29812](https://github.com/ceph/ceph/pull/29812), Patrick Donnelly)
- tests: install python3-cephfs for fs suite ([pr#31285](https://github.com/ceph/ceph/pull/31285), Kefu Chai)
- tests: kclient unmount hangs after file system goes down ([issue#38709](http://tracker.ceph.com/issues/38709), [issue#38677](http://tracker.ceph.com/issues/38677), [pr#29218](https://github.com/ceph/ceph/pull/29218), Patrick Donnelly)
- tests: krbd\_msgr\_segments.t: filter lvcreate output ([pr#31324](https://github.com/ceph/ceph/pull/31324), Ilya Dryomov)
- tests: make get\_mon\_status use mon addr ([pr#31461](https://github.com/ceph/ceph/pull/31461), Sage Weil, Nathan Cutler)
- tests: make: \*\*\* \[hello\_world\_cpp\] Error 127 in rados ([issue#40320](http://tracker.ceph.com/issues/40320), [pr#29203](https://github.com/ceph/ceph/pull/29203), Kefu Chai)
- tests: qa/standalone/scrub/osd-scrub-snaps.sh sometimes fails ([issue#40179](http://tracker.ceph.com/issues/40179), [issue#40078](http://tracker.ceph.com/issues/40078), [pr#29251](https://github.com/ceph/ceph/pull/29251), David Zafman)
- tests: qa/tasks/ceph.py: pass cluster\_name to get\_mons ([pr#31424](https://github.com/ceph/ceph/pull/31424), Nathan Cutler)
- tests: qa/workunits/rbd: stress test "rbd mirror pool status --verbose" ([pr#29873](https://github.com/ceph/ceph/pull/29873), Mykola Golub)
- tests: remove "1node" and "systemd" tests as ceph-deploy is not actively developed ([pr#28457](https://github.com/ceph/ceph/pull/28457), Yuri Weinstein)
- tests: sleep briefly after resetting kclient ([pr#29751](https://github.com/ceph/ceph/pull/29751), Patrick Donnelly)
- tests: test\_volume\_client: print python version correctly ([issue#40317](http://tracker.ceph.com/issues/40317), [issue#40184](http://tracker.ceph.com/issues/40184), [pr#29208](https://github.com/ceph/ceph/pull/29208), Lianne)
- tests: use curl in wait\_for\_radosgw() in util/rgw.py ([pr#28668](https://github.com/ceph/ceph/pull/28668), Ali Maredia)
- tests: use hard\_reset to reboot kclient ([issue#37681](http://tracker.ceph.com/issues/37681), [pr#30233](https://github.com/ceph/ceph/pull/30233), Patrick Donnelly)
- tests: whitelisted 'application not enabled' ([pr#28389](https://github.com/ceph/ceph/pull/28389), Yuri Weinstein)
- tools/rados: list objects in a pg ([issue#36732](http://tracker.ceph.com/issues/36732), [pr#30893](https://github.com/ceph/ceph/pull/30893), Vikhyat Umrao, Li Wang)
- tools/rbd-ggate: close log before running postfork ([pr#30121](https://github.com/ceph/ceph/pull/30121), Willem Jan Withagen)
- tools: Add clear-data-digest command to objectstore tool ([issue#37749](http://tracker.ceph.com/issues/37749), [pr#29196](https://github.com/ceph/ceph/pull/29196), Li Yichao)
- tools: ceph-objectstore-tool can't remove head with bad snapset ([pr#30081](https://github.com/ceph/ceph/pull/30081), David Zafman)
- tools: ceph-objectstore-tool: return 0 if incmap is sane ([pr#31659](https://github.com/ceph/ceph/pull/31659), Kefu Chai)
- tools: ceph-objectstore-tool: update-mon-db: do not fail if incmap is missing ([pr#30979](https://github.com/ceph/ceph/pull/30979), Kefu Chai)
- tools: crushtool crash on Fedora 28 and newer ([issue#39174](http://tracker.ceph.com/issues/39174), [issue#39311](http://tracker.ceph.com/issues/39311), [pr#27986](https://github.com/ceph/ceph/pull/27986), Brad Hubbard)
