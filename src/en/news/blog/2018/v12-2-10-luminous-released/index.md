---
title: "v12.2.10 Luminous released"
date: "2018-11-27"
author: "TheAnalyst"
---

This is the tenth bug fix release of the Luminous v12.2.x long term stable release series. The previous release, v12.2.9, introduced the PG hard-limit patches which were found to cause an issue in certain upgrade scenarios, and this release was expedited to revert those patches. If you already successfully upgraded to v12.2.9, you should **not** upgrade to v12.2.10, but rather **wait** for a release in which [http://tracker.ceph.com/issues/36686](http://tracker.ceph.com/issues/36686) is addressed. All other users are encouraged to upgrade to this release.

## Notable Changes

OSD

- This release reverts the PG hard-limit patches added in v12.2.9 ([https://tracker.ceph.com/issues/23979](https://tracker.ceph.com/issues/23979)), in which, a partial upgrade,  during  a recovery or a backfill can cause the osds on the previous version, to fail with assert(trim\_to <= info.last\_complete). The workaround for users running v12.2.9 is to upgrade and restart all OSDs to a version with the pg hard limit, or only upgrade when all PGs are active+clean.

See also: [http://tracker.ceph.com/issues/36686](http://tracker.ceph.com/issues/36686)

 _As mentioned in the release announcements if you have updated to v12.2.9 already, please do **NOT** upgrade to v12.2.10 until the above mentioned issue is addressed_

- The bluestore\_cache\_\* options are no longer needed. They are replaced by osd\_memory\_target, defaulting to 4GB. BlueStore will expand and contract its cache to attempt to stay within this limit. Users upgrading should note this is a higher default than the previous bluestore\_cache\_size of 1GB, so OSDs using BlueStore will use more memory by default.
    
    For more details, see [BlueStore docs](http://docs.ceph.com/docs/master/rados/configuration/bluestore-config-ref/#cache-size) 

## Changelog

- ceph-volume: add some choose\_disk capabilities ([issue#36446](http://tracker.ceph.com/issues/36446), [pr#24783](https://github.com/ceph/ceph/pull/24783), Erwan Velu)
- ceph-volume: remove version reporting from help menu ([issue#36386](http://tracker.ceph.com/issues/36386), [pr#24754](https://github.com/ceph/ceph/pull/24754), Alfredo Deza)
- ceph-volume: systemd import main so console\_scripts work for executable ([issue#36648](http://tracker.ceph.com/issues/36648), [pr#24853](https://github.com/ceph/ceph/pull/24853), Alfredo Deza)
- ceph-volume: tests install ceph-ansible’s requirements.txt dependencies ([issue#36672](http://tracker.ceph.com/issues/36672), [pr#24960](https://github.com/ceph/ceph/pull/24960), Alfredo Deza)
- ceph-volume: util.encryption don’t push stderr to terminal ([issue#36246](http://tracker.ceph.com/issues/36246), [pr#24827](https://github.com/ceph/ceph/pull/24827), Alfredo Deza)
- ceph-volume: util.encryption robust blkid+lsblk detection of lockbox ([pr#24981](https://github.com/ceph/ceph/pull/24981), Alfredo Deza)
- ceph-volume: use console\_scripts ([issue#36601](http://tracker.ceph.com/issues/36601), [pr#24837](https://github.com/ceph/ceph/pull/24837), Mehdi Abaakouk)
- OSDMapMapping does not handle active.size() > pool size ([issue#26866](http://tracker.ceph.com/issues/26866), [issue#35935](http://tracker.ceph.com/issues/35935), [pr#24432](https://github.com/ceph/ceph/pull/24432), Sage Weil)
- PG: add custom\_reaction Backfilled and release reservations ([issue#24333](http://tracker.ceph.com/issues/24333), [pr#23493](https://github.com/ceph/ceph/pull/23493), Neha Ojha)
- Revert “PG: add custom\_reaction Backfilled and release reservations after backfill ([pr#24902](https://github.com/ceph/ceph/pull/24902), Neha Ojha)
- Revert pg log limit changes ([issue#36686](http://tracker.ceph.com/issues/36686), [pr#24903](https://github.com/ceph/ceph/pull/24903), Neha Ojha)
- backport and other test fixes for osd-scrub-repair.sh ([issue#35845](http://tracker.ceph.com/issues/35845), [issue#36393](http://tracker.ceph.com/issues/36393), [pr#24532](https://github.com/ceph/ceph/pull/24532), Xinying Song, David Zafman)
- ceph-volume tests.systemd update imports for systemd module ([issue#36704](http://tracker.ceph.com/issues/36704), [pr#24958](https://github.com/ceph/ceph/pull/24958), Alfredo Deza)
- ceph-volume: adds a –prepare flag to lvm batch ([issue#36363](http://tracker.ceph.com/issues/36363), [pr#24759](https://github.com/ceph/ceph/pull/24759), Andrew Schoen)
- cls/user: cls\_user\_remove\_bucket writes modified header ([issue#36534](http://tracker.ceph.com/issues/36534), [issue#36496](http://tracker.ceph.com/issues/36496), [pr#24855](https://github.com/ceph/ceph/pull/24855), Casey Bodley)
- core: by pass cache if performing deep scrub ([issue#35067](http://tracker.ceph.com/issues/35067), [pr#24802](https://github.com/ceph/ceph/pull/24802), Xiaoguang Wang)
- crush/CrushWrapper: fix crush tree json dumper ([issue#36149](http://tracker.ceph.com/issues/36149), [pr#24482](https://github.com/ceph/ceph/pull/24482), Oshyn Song)
- ec: src/common/interval\_map.h: 161: FAILED assert(len > 0) ([issue#21931](http://tracker.ceph.com/issues/21931), [issue#22330](http://tracker.ceph.com/issues/22330), [pr#24582](https://github.com/ceph/ceph/pull/24582), Neha Ojha)
- gperftools-libs-2.6.1-1 or newer required for binaries linked against corresponding version at build time ([issue#36552](http://tracker.ceph.com/issues/36552), [issue#23657](http://tracker.ceph.com/issues/23657), [issue#36558](http://tracker.ceph.com/issues/36558), [issue#36508](http://tracker.ceph.com/issues/36508), [pr#24706](https://github.com/ceph/ceph/pull/24706), Brad Hubbard)
- osd: add creating to pg\_string\_state ([issue#36174](http://tracker.ceph.com/issues/36174), [issue#36297](http://tracker.ceph.com/issues/36297), [pr#24602](https://github.com/ceph/ceph/pull/24602), Dan van der Ster)
- osd: cast ‘whoami’ to unsigned so it can be used as the seed for RNG ([issue#26890](http://tracker.ceph.com/issues/26890), [pr#24659](https://github.com/ceph/ceph/pull/24659), Kefu Chai)
- osd: get loadavg per cpu for scrub load threshold check ([pr#24593](https://github.com/ceph/ceph/pull/24593), kungf)
- osdc/Objecter: possible race condition with connection reset ([issue#36183](http://tracker.ceph.com/issues/36183), [issue#36295](http://tracker.ceph.com/issues/36295), [pr#24574](https://github.com/ceph/ceph/pull/24574), Jason Dillaman)
- qa: add test that builds example librados programs ([issue#36229](http://tracker.ceph.com/issues/36229), [issue#15100](http://tracker.ceph.com/issues/15100), [pr#24538](https://github.com/ceph/ceph/pull/24538), Nathan Cutler)
- qa/ceph-ansible: Specify stable-3.2 branch ([issue#37331](https://tracker.ceph.com/issues/37331), [pr#25170](https://github.com/ceph/ceph/pull/25170), Brad Hubbard)
- rgw/beast: drop privileges after binding ports ([issue#36041](http://tracker.ceph.com/issues/36041), [pr#24454](https://github.com/ceph/ceph/pull/24454), Paul Emmerich)
- rgw: RGWAsyncGetBucketInstanceInfo does not access coroutine memory ([issue#35812](http://tracker.ceph.com/issues/35812), [issue#36212](http://tracker.ceph.com/issues/36212), [pr#24507](https://github.com/ceph/ceph/pull/24507), Casey Bodley)
- rgw: fix leak of curl handle on shutdown ([issue#35715](http://tracker.ceph.com/issues/35715), [issue#36214](http://tracker.ceph.com/issues/36214), [pr#24519](https://github.com/ceph/ceph/pull/24519), Casey Bodley)
- rgw: list bucket can not show the object uploaded by RGWPostObj when enable bucket versioning ([pr#24570](https://github.com/ceph/ceph/pull/24570), yuliyang)
- rgw: multisite: enforce spawn\_window for data full sync ([issue#26897](http://tracker.ceph.com/issues/26897), [pr#24857](https://github.com/ceph/ceph/pull/24857), Casey Bodley)
- rgw: set default objecter\_inflight\_ops = 24576 ([issue#36570](http://tracker.ceph.com/issues/36570), [issue#25109](http://tracker.ceph.com/issues/25109), [pr#24862](https://github.com/ceph/ceph/pull/24862), Matt Benjamin)
- rgw: user stats account for resharded buckets ([pr#24854](https://github.com/ceph/ceph/pull/24854), Casey Bodley)
- segv in BlueStore::OldExtent::create ([issue#36526](http://tracker.ceph.com/issues/36526), [issue#36591](http://tracker.ceph.com/issues/36591), [pr#24746](https://github.com/ceph/ceph/pull/24746), Sage Weil)
- test/common: unittest\_mclock\_priority\_queue builds with “make” command ([pr#24808](https://github.com/ceph/ceph/pull/24808), J. Eric Ivancich)

## Changelog for v12.2.9

- build/ops: add e2fsprogs runtime dependency ([pr#24663](https://github.com/ceph/ceph/pull/24663), Guillaume Abrioux, Alfredo Deza)
- build/ops: deb: fix ceph-mgr .pyc files left behind ([issue#26883](http://tracker.ceph.com/issues/26883), [pr#23832](https://github.com/ceph/ceph/pull/23832), Dan Mick)
- build/ops: deb: require fuse for ceph-fuse ([issue#21057](http://tracker.ceph.com/issues/21057), [pr#23693](https://github.com/ceph/ceph/pull/23693), Thomas Serlin)
- build/ops: rpm: selinux-policy fixes ([pr#24136](https://github.com/ceph/ceph/pull/24136), Brad Hubbard)
- build/ops: rpm: use updated gperftools ([issue#35969](http://tracker.ceph.com/issues/35969), [pr#24259](https://github.com/ceph/ceph/pull/24259), Kefu Chai)
- ceph-volume: activate option –auto-detect-objectstore respects –no-systemd ([issue#36249](http://tracker.ceph.com/issues/36249), [pr#24358](https://github.com/ceph/ceph/pull/24358), Alfredo Deza)
- ceph-volume: lsblk can fail to find PARTLABEL, must fallback to blkid ([issue#36098](http://tracker.ceph.com/issues/36098), [pr#24335](https://github.com/ceph/ceph/pull/24335), Alfredo Deza)
- ceph-volume: add new ceph-handlers role from ceph-ansible ([issue#36251](http://tracker.ceph.com/issues/36251), [pr#24338](https://github.com/ceph/ceph/pull/24338), Alfredo Deza)
- ceph-volume: batch carve out lvs for bluestore ([issue#34535](http://tracker.ceph.com/issues/34535), [pr#24075](https://github.com/ceph/ceph/pull/24075), Alfredo Deza)
- ceph-volume: batch tests for mixed-type of devices ([issue#35535](http://tracker.ceph.com/issues/35535), [issue#27210](http://tracker.ceph.com/issues/27210), [pr#23967](https://github.com/ceph/ceph/pull/23967), Alfredo Deza)
- ceph-volume: batch: allow –osds-per-device, default it to 1 ([issue#35913](http://tracker.ceph.com/issues/35913), [pr#24080](https://github.com/ceph/ceph/pull/24080), Alfredo Deza)
- ceph-volume: batch: allow journal+block.db sizing on the CLI ([issue#36088](http://tracker.ceph.com/issues/36088), [pr#24209](https://github.com/ceph/ceph/pull/24209), Alfredo Deza)
- ceph-volume: custom cluster names fail on filestore trigger ([issue#27210](http://tracker.ceph.com/issues/27210), [pr#24280](https://github.com/ceph/ceph/pull/24280), Alfredo Deza)
- ceph-volume: do not send (lvm) stderr/stdout to the terminal, use the logfile ([issue#36492](http://tracker.ceph.com/issues/36492), [pr#24741](https://github.com/ceph/ceph/pull/24741), Alfredo Deza)
- ceph-volume: earlier detection for –journal and –filestore flag requirements ([issue#24794](http://tracker.ceph.com/issues/24794), [pr#24206](https://github.com/ceph/ceph/pull/24206), Alfredo Deza)
- ceph-volume: fix journal and filestore data size in lvm batch –report ([issue#36242](http://tracker.ceph.com/issues/36242), [pr#24307](https://github.com/ceph/ceph/pull/24307), Andrew Schoen)
- ceph-volume: fix zap not working with LVs ([issue#35970](http://tracker.ceph.com/issues/35970), [pr#24082](https://github.com/ceph/ceph/pull/24082), Alfredo Deza)
- ceph-volume: lvm.prepare update help to indicate partitions are needed, not devices ([issue#24795](http://tracker.ceph.com/issues/24795), [pr#24451](https://github.com/ceph/ceph/pull/24451), Jeffrey Zhang, Alfredo Deza)
- ceph-volume: make lvm batch idempotent ([pr#24589](https://github.com/ceph/ceph/pull/24589), Andrew Schoen)
- ceph-volume: remove version reporting from help menu ([issue#36386](http://tracker.ceph.com/issues/36386), [pr#24754](https://github.com/ceph/ceph/pull/24754), Alfredo Deza)
- ceph-volume: skip processing devices that don’t exist when scanning system disks ([issue#36247](http://tracker.ceph.com/issues/36247), [pr#24382](https://github.com/ceph/ceph/pull/24382), Alfredo Deza)
- cephfs: MDSMonitor: consider raising priority of MMDSBeacons from MDS so they are processed before other client messages ([issue#26899](http://tracker.ceph.com/issues/26899), [pr#23554](https://github.com/ceph/ceph/pull/23554), Patrick Donnelly)
- cephfs: MDSMonitor: lookup of gid in prepare\_beacon that has been removed will cause exception ([issue#35848](http://tracker.ceph.com/issues/35848), [pr#23990](https://github.com/ceph/ceph/pull/23990), Patrick Donnelly)
- cephfs: ceph-fuse: add SELinux policy ([issue#36103](http://tracker.ceph.com/issues/36103), [pr#24313](https://github.com/ceph/ceph/pull/24313), Patrick Donnelly)
- cephfs: ceph\_volume\_client: allow atomic update of RADOS objects ([issue#24173](http://tracker.ceph.com/issues/24173), [pr#24084](https://github.com/ceph/ceph/pull/24084), Rishabh Dave)
- cephfs: ceph\_volume\_client: delay required after adding data pool to MDSMap ([issue#25141](http://tracker.ceph.com/issues/25141), [pr#23726](https://github.com/ceph/ceph/pull/23726), Patrick Donnelly)
- cephfs: ceph\_volume\_client: py3 compatible ([issue#17230](http://tracker.ceph.com/issues/17230), [pr#24083](https://github.com/ceph/ceph/pull/24083), Rishabh Dave, Patrick Donnelly)
- cephfs: cephfs-data-scan: print the max used ino ([issue#26925](http://tracker.ceph.com/issues/26925), [pr#23881](https://github.com/ceph/ceph/pull/23881), “Yan, Zheng”)
- cephfs: cephfs-journal-tool: wrong layout info used ([issue#24644](http://tracker.ceph.com/issues/24644), [pr#24033](https://github.com/ceph/ceph/pull/24033), Gu Zhongyan)
- cephfs: client: check for unmounted condition before printing debug output ([issue#25213](http://tracker.ceph.com/issues/25213), [pr#23617](https://github.com/ceph/ceph/pull/23617), Jeff Layton)
- cephfs: client: drop null child dentries before try pruning inode’s alias ([issue#22293](http://tracker.ceph.com/issues/22293), [pr#24119](https://github.com/ceph/ceph/pull/24119), “Yan, Zheng”)
- cephfs: client: fix choose\_target\_mds for requests that do name lookup ([issue#26860](http://tracker.ceph.com/issues/26860), [pr#23793](https://github.com/ceph/ceph/pull/23793), “Yan, Zheng”)
- cephfs: client: retry remount on dcache invalidation failure ([issue#27657](http://tracker.ceph.com/issues/27657), [pr#24303](https://github.com/ceph/ceph/pull/24303), Venky Shankar)
- cephfs: client: statfs inode count odd ([issue#24849](http://tracker.ceph.com/issues/24849), [pr#24376](https://github.com/ceph/ceph/pull/24376), Rishabh Dave)
- cephfs: client: two ceph-fuse clients, one can not list out files created by another ([issue#27051](http://tracker.ceph.com/issues/27051), [pr#24282](https://github.com/ceph/ceph/pull/24282), Peng Xie)
- cephfs: client: update ctime when modifying file content ([issue#35945](http://tracker.ceph.com/issues/35945), [pr#24323](https://github.com/ceph/ceph/pull/24323), “Yan, Zheng”)
- common: get real hostname from container/pod environment ([pr#23915](https://github.com/ceph/ceph/pull/23915), Sage Weil)
- core: PGPool::update optimizations ([pr#23969](https://github.com/ceph/ceph/pull/23969), Zac Medico)
- core: ceph-disk: compatibility fix for python 3 ([issue#35906](http://tracker.ceph.com/issues/35906), [pr#24347](https://github.com/ceph/ceph/pull/24347), Tim Serong)
- core: discover\_all\_missing() not always called during activating ([issue#22837](http://tracker.ceph.com/issues/22837), [pr#23817](https://github.com/ceph/ceph/pull/23817), Sage Weil, David Zafman)
- core: kv/KeyValueDB: return const char\* from MergeOperator::name() ([issue#26875](http://tracker.ceph.com/issues/26875), [pr#23566](https://github.com/ceph/ceph/pull/23566), Sage Weil)
- core: librados application’s symbol could conflict with the libceph-common ([issue#25154](http://tracker.ceph.com/issues/25154), [pr#23483](https://github.com/ceph/ceph/pull/23483), Kefu Chai)
- core: mgr/MgrClient: guard send\_pgstats() with lock ([issue#23370](http://tracker.ceph.com/issues/23370), [pr#23791](https://github.com/ceph/ceph/pull/23791), Kefu Chai)
- core: mgr/balancer: deepcopy best plan - otherwise we get latest ([issue#27000](http://tracker.ceph.com/issues/27000), [pr#23740](https://github.com/ceph/ceph/pull/23740), Stefan Priebe)
- core: mgrc: enable disabling stats via mgr\_stats\_threshold ([issue#25197](http://tracker.ceph.com/issues/25197), [pr#23461](https://github.com/ceph/ceph/pull/23461), John Spray)
- core: mon/OSDMonitor: invalidate max\_failed\_since on cancel\_report ([issue#35860](http://tracker.ceph.com/issues/35860), [pr#24257](https://github.com/ceph/ceph/pull/24257), xie xingguo)
- core: object errors found in be\_select\_auth\_object() aren’t logged the same ([issue#25108](http://tracker.ceph.com/issues/25108), [pr#23871](https://github.com/ceph/ceph/pull/23871), David Zafman)
- core: os/bluestore: bluestore\_buffer\_hit\_bytes perf counter doesn’t reset ([pr#23773](https://github.com/ceph/ceph/pull/23773), Igor Fedotov)
- core: os/bluestore: cache autotuning and memory limit ([pr#24065](https://github.com/ceph/ceph/pull/24065), Mark Nelson)
- core: osd,mon: increase mon\_max\_pg\_per\_osd to 250 ([issue#25112](http://tracker.ceph.com/issues/25112), [pr#23862](https://github.com/ceph/ceph/pull/23862), Neha Ojha)
- core: osd/PG: avoid choose\_acting picking want with > pool size items ([issue#35924](http://tracker.ceph.com/issues/35924), [pr#24299](https://github.com/ceph/ceph/pull/24299), Sage Weil)
- core: osdc/Objecter: fix split vs reconnect race ([issue#22544](http://tracker.ceph.com/issues/22544), [pr#24188](https://github.com/ceph/ceph/pull/24188), Sage Weil)
- core: rados python bindings use prval from stack ([issue#25175](http://tracker.ceph.com/issues/25175), [pr#23864](https://github.com/ceph/ceph/pull/23864), Sage Weil)
- doc: Fix broken urls ([issue#25185](http://tracker.ceph.com/issues/25185), [pr#23621](https://github.com/ceph/ceph/pull/23621), Jos Collin)
- doc: remove deprecated ‘scrubq’ from ceph(8) ([issue#35813](http://tracker.ceph.com/issues/35813), [pr#24211](https://github.com/ceph/ceph/pull/24211), Ruben Kerkhof)
- doc: rgw: ldap-auth: fixed option name ‘rgw\_ldap\_searchfilter’ ([issue#23081](http://tracker.ceph.com/issues/23081), [pr#23761](https://github.com/ceph/ceph/pull/23761), Konstantin Shalygin)
- mds: MDBalancer::try\_rebalance() may stop prematurely ([issue#26973](http://tracker.ceph.com/issues/26973), [pr#23884](https://github.com/ceph/ceph/pull/23884), “Yan, Zheng”)
- mds: allows client to create .. and . dirents ([issue#25113](http://tracker.ceph.com/issues/25113), [pr#24329](https://github.com/ceph/ceph/pull/24329), Venky Shankar)
- mds: avoid using g\_conf->get\_val<…>(…) in hot path ([issue#24820](http://tracker.ceph.com/issues/24820), [pr#23408](https://github.com/ceph/ceph/pull/23408), “Yan, Zheng”)
- mds: calculate load by checking self CPU usage ([issue#26834](http://tracker.ceph.com/issues/26834), [pr#23505](https://github.com/ceph/ceph/pull/23505), “Yan, Zheng”)
- mds: configurable timeout for client eviction ([issue#25188](http://tracker.ceph.com/issues/25188), [pr#24086](https://github.com/ceph/ceph/pull/24086), Patrick Donnelly, Venky Shankar)
- mds: crash when dumping ops in flight ([issue#26894](http://tracker.ceph.com/issues/26894), [pr#23677](https://github.com/ceph/ceph/pull/23677), “Yan, Zheng”)
- mds: curate priority of perf counters sent to mgr ([issue#22097](http://tracker.ceph.com/issues/22097), [issue#24004](http://tracker.ceph.com/issues/24004), [pr#24089](https://github.com/ceph/ceph/pull/24089), Guan yunfei, Venky Shankar)
- mds: explain delayed client\_request due to subtree migration ([issue#24840](http://tracker.ceph.com/issues/24840), [pr#23678](https://github.com/ceph/ceph/pull/23678), Yan, Zheng, “Yan, Zheng”)
- mds: health warning for slow metadata IO ([issue#24879](http://tracker.ceph.com/issues/24879), [pr#24171](https://github.com/ceph/ceph/pull/24171), “Yan, Zheng”)
- mds: internal op missing events time ‘throttled’, ‘all\_read’, ‘dispatched’ ([issue#36114](http://tracker.ceph.com/issues/36114), [pr#24410](https://github.com/ceph/ceph/pull/24410), Yanhu Cao)
- mds: mds got laggy because of MDSBeacon stuck in mqueue ([issue#23519](http://tracker.ceph.com/issues/23519), [pr#23556](https://github.com/ceph/ceph/pull/23556), “Yan, Zheng”)
- mds: optimize the way how max export size is enforced ([issue#25131](http://tracker.ceph.com/issues/25131), [pr#23789](https://github.com/ceph/ceph/pull/23789), “Yan, Zheng”)
- mds: prevent MDSRank::evict\_client from blocking finisher thread ([issue#35720](http://tracker.ceph.com/issues/35720), [pr#23946](https://github.com/ceph/ceph/pull/23946), “Yan, Zheng”)
- mds: print is\_laggy message once ([issue#35250](http://tracker.ceph.com/issues/35250), [pr#24138](https://github.com/ceph/ceph/pull/24138), Patrick Donnelly)
- mds: rctime may go back ([issue#35916](http://tracker.ceph.com/issues/35916), [pr#24378](https://github.com/ceph/ceph/pull/24378), “Yan, Zheng”)
- mds: reset heartbeat map at potential time-consuming places ([issue#26858](http://tracker.ceph.com/issues/26858), [pr#23507](https://github.com/ceph/ceph/pull/23507), Yan, Zheng, “Yan, Zheng”)
- mds: runs out of file descriptors after several respawns ([issue#35850](http://tracker.ceph.com/issues/35850), [pr#24310](https://github.com/ceph/ceph/pull/24310), Patrick Donnelly)
- mds: track average session uptime ([issue#25013](http://tracker.ceph.com/issues/25013), [pr#24421](https://github.com/ceph/ceph/pull/24421), Patrick Donnelly, Venky Shankar)
- mds: use monotonic clock for beacon message timekeeping ([issue#26959](http://tracker.ceph.com/issues/26959), [pr#24311](https://github.com/ceph/ceph/pull/24311), Patrick Donnelly)
- mgr: Sync the prometheus module ([pr#23216](https://github.com/ceph/ceph/pull/23216), Boris Ranto)
- mon: Automatically set expected\_num\_objects for new pools with >=100 PGs per OSD ([issue#24687](http://tracker.ceph.com/issues/24687), [pr#24395](https://github.com/ceph/ceph/pull/24395), Douglas Fuller)
- msg: “challenging authorizer” messages appear at debug\_ms=0 ([issue#35251](http://tracker.ceph.com/issues/35251), [pr#23943](https://github.com/ceph/ceph/pull/23943), Patrick Donnelly)
- msg: async: clean up local buffers on dispatch ([issue#35987](http://tracker.ceph.com/issues/35987), [pr#24387](https://github.com/ceph/ceph/pull/24387), Greg Farnum)
- msg: ceph\_abort() when there are enough accepter errors in msg server ([issue#23649](http://tracker.ceph.com/issues/23649), [pr#24419](https://github.com/ceph/ceph/pull/24419), [penglaiyxy@gmail.com](mailto:penglaiyxy%40gmail.com))
- osd: EC: slow/hung ops in multimds suite test ([issue#23769](http://tracker.ceph.com/issues/23769), [pr#24393](https://github.com/ceph/ceph/pull/24393), Sage Weil)
- osd: ECBackend: don’t get result code of subchunk-read overwritten ([issue#21769](http://tracker.ceph.com/issues/21769), [pr#24342](https://github.com/ceph/ceph/pull/24342), songweibin)
- osd: Limit pg log length during recovery/backfill so that we don’t run out of memory ([issue#21416](http://tracker.ceph.com/issues/21416), [pr#23211](https://github.com/ceph/ceph/pull/23211), Neha Ojha, xie xingguo)
- osd: OSDMap: fix apply upmap segfault ([issue#22056](http://tracker.ceph.com/issues/22056), [pr#23579](https://github.com/ceph/ceph/pull/23579), Brad Hubbard)
- osd: PG: add custom\_reaction Backfilled and release reservations after bac… ([issue#23614](http://tracker.ceph.com/issues/23614), [pr#23493](https://github.com/ceph/ceph/pull/23493), Neha Ojha)
- osd: PrimaryLogPG: fix potential pg-log overtrimming ([pr#24308](https://github.com/ceph/ceph/pull/24308), xie xingguo)
- osd: backport ‘bench’ and stdout changes ([issue#24022](http://tracker.ceph.com/issues/24022), [pr#23680](https://github.com/ceph/ceph/pull/23680), Коренберг Маркr, John Spray, Kefu Chai)
- osd: read object attrs failed at EC recovery ([issue#24406](http://tracker.ceph.com/issues/24406), [pr#24327](https://github.com/ceph/ceph/pull/24327), xiaofei cui)
- osd: scrub livelock ([issue#26890](http://tracker.ceph.com/issues/26890), [pr#24396](https://github.com/ceph/ceph/pull/24396), Sage Weil)
- qa/suites/rados/upgrade/jewel-x-singleton: exclude python3-rados, python3-cephfs ([pr#24479](https://github.com/ceph/ceph/pull/24479), Neha Ojha)
- rbd: \[rbd-mirror\] failed assertion when updating mirror status ([issue#36084](http://tracker.ceph.com/issues/36084), [pr#24320](https://github.com/ceph/ceph/pull/24320), Jason Dillaman)
- rbd: fix error import when the input is a pipe ([issue#34536](http://tracker.ceph.com/issues/34536), [pr#24003](https://github.com/ceph/ceph/pull/24003), songweibin)
- rbd: librbd: blacklisted client might not notice it lost the lock ([issue#34534](http://tracker.ceph.com/issues/34534), [pr#24405](https://github.com/ceph/ceph/pull/24405), Song Shun, Mykola Golub, Jason Dillaman)
- rbd: librbd: discard should wait for in-flight cache writeback to complete ([issue#23548](http://tracker.ceph.com/issues/23548), [pr#23594](https://github.com/ceph/ceph/pull/23594), Jason Dillaman)
- rbd: librbd: ensure exclusive lock acquired when removing sync point snaps… ([issue#24898](http://tracker.ceph.com/issues/24898), [pr#24123](https://github.com/ceph/ceph/pull/24123), Mykola Golub, Jason Dillaman)
- rbd: librbd: fix refuse to release lock when cookie is the same at rewatch ([issue#27986](http://tracker.ceph.com/issues/27986), [pr#23758](https://github.com/ceph/ceph/pull/23758), Song Shun)
- rbd: librbd: fixed assert when flattening clone with zero overlap ([issue#35702](http://tracker.ceph.com/issues/35702), [pr#24285](https://github.com/ceph/ceph/pull/24285), Jason Dillaman)
- rbd: librbd: image create request should validate data pool for self-managed snapshot support ([issue#24675](http://tracker.ceph.com/issues/24675), [pr#24390](https://github.com/ceph/ceph/pull/24390), Mykola Golub)
- rbd: librbd: journaling unable request can not be sent to remote lock owner ([issue#26939](http://tracker.ceph.com/issues/26939), [pr#24100](https://github.com/ceph/ceph/pull/24100), Mykola Golub)
- rbd: librbd: object map improperly flagged as invalidated ([issue#24516](http://tracker.ceph.com/issues/24516), [pr#24415](https://github.com/ceph/ceph/pull/24415), Jason Dillaman)
- rbd: librbd: potential race on image create request complete ([issue#24910](http://tracker.ceph.com/issues/24910), [pr#23892](https://github.com/ceph/ceph/pull/23892), Mykola Golub)
- rgw: ‘radosgw-admin sync error trim’ only trims partially ([issue#24873](http://tracker.ceph.com/issues/24873), [pr#24054](https://github.com/ceph/ceph/pull/24054), Casey Bodley)
- rgw: Fix log level of gc\_iterate\_entries ([issue#23801](http://tracker.ceph.com/issues/23801), [pr#23665](https://github.com/ceph/ceph/pull/23665), iliul)
- rgw: Limit the number of lifecycle rules on one bucket ([issue#24572](http://tracker.ceph.com/issues/24572), [pr#23522](https://github.com/ceph/ceph/pull/23522), Zhang Shaowen)
- rgw: The delete markers generated by object expiration should have owner ([issue#24568](http://tracker.ceph.com/issues/24568), [pr#23545](https://github.com/ceph/ceph/pull/23545), Zhang Shaowen)
- rgw: abort\_bucket\_multiparts() ignores individual NoSuchUpload errors ([issue#35986](http://tracker.ceph.com/issues/35986), [pr#24389](https://github.com/ceph/ceph/pull/24389), Casey Bodley)
- rgw: change default rgw\_thread\_pool\_size to 512 ([issue#25214](http://tracker.ceph.com/issues/25214), [issue#24544](http://tracker.ceph.com/issues/24544), [pr#24034](https://github.com/ceph/ceph/pull/24034), Douglas Fuller, Casey Bodley)
- rgw: cls/rgw: don’t assert in decode\_list\_index\_key() ([issue#24117](http://tracker.ceph.com/issues/24117), [pr#24391](https://github.com/ceph/ceph/pull/24391), Yehuda Sadeh)
- rgw: cls/rgw: ready rgw\_usage\_log\_entry for extraction via ceph-dencoder ([issue#34537](http://tracker.ceph.com/issues/34537), [pr#23974](https://github.com/ceph/ceph/pull/23974), Vaibhav Bhembre)
- rgw: fix chunked-encoding for chunks >1MiB ([issue#35990](http://tracker.ceph.com/issues/35990), [pr#24361](https://github.com/ceph/ceph/pull/24361), Robin H. Johnson)
- rgw: fix deadlock on RGWIndexCompletionManager::stop ([issue#26949](http://tracker.ceph.com/issues/26949), [pr#24069](https://github.com/ceph/ceph/pull/24069), Yao Zongyou)
- rgw: incremental data sync uses truncated flag to detect end of listing ([issue#26952](http://tracker.ceph.com/issues/26952), [pr#24242](https://github.com/ceph/ceph/pull/24242), Casey Bodley)
- rgw: multisite: data sync error repo processing does not back off on empty ([issue#26938](http://tracker.ceph.com/issues/26938), [pr#24318](https://github.com/ceph/ceph/pull/24318), Casey Bodley)
- rgw: multisite: intermittent failures in test\_bucket\_sync\_disable\_enable ([issue#26895](http://tracker.ceph.com/issues/26895), [pr#24316](https://github.com/ceph/ceph/pull/24316), Casey Bodley)
- rgw: multisite: intermittent test\_bucket\_index\_log\_trim failures ([issue#36034](http://tracker.ceph.com/issues/36034), [pr#24398](https://github.com/ceph/ceph/pull/24398), Casey Bodley)
- rgw: multisite: object metadata operations are skipped by sync ([issue#24367](http://tracker.ceph.com/issues/24367), [pr#24056](https://github.com/ceph/ceph/pull/24056), Casey Bodley)
- rgw: multisite: object name should be urlencoded when we put it into ES ([issue#23216](http://tracker.ceph.com/issues/23216), [pr#24424](https://github.com/ceph/ceph/pull/24424), Chang Liu)
- rgw: multisite: out of order updates to sync status markers ([issue#35539](http://tracker.ceph.com/issues/35539), [pr#24317](https://github.com/ceph/ceph/pull/24317), Yehuda Sadeh)
- rgw: multisite: segfault on shutdown/realm reload ([issue#35543](http://tracker.ceph.com/issues/35543), [pr#24231](https://github.com/ceph/ceph/pull/24231), Casey Bodley)
- rgw: multisite: update index segfault on shutdown/realm reload ([issue#35905](http://tracker.ceph.com/issues/35905), [pr#24397](https://github.com/ceph/ceph/pull/24397), Tianshan Qu)
- rgw: raise debug level on redundant data sync error messages ([issue#35830](http://tracker.ceph.com/issues/35830), [issue#36037](http://tracker.ceph.com/issues/36037), [pr#24135](https://github.com/ceph/ceph/pull/24135), Casey Bodley, Matt Benjamin)
- rgw: raise default rgw\_curl\_low\_speed\_time to 300 seconds ([issue#27989](http://tracker.ceph.com/issues/27989), [pr#24046](https://github.com/ceph/ceph/pull/24046), Casey Bodley)
- rgw: resharding produces invalid values of bucket stats ([issue#36290](http://tracker.ceph.com/issues/36290), [pr#24527](https://github.com/ceph/ceph/pull/24527), Abhishek Lekshmanan)
- rgw: return x-amz-version-id: null when delete obj in versioning suspended bucket ([issue#35814](http://tracker.ceph.com/issues/35814), [pr#24190](https://github.com/ceph/ceph/pull/24190), yuliyang)
- rgw: rgw\_file: deep stat handling ([issue#24915](http://tracker.ceph.com/issues/24915), [pr#23499](https://github.com/ceph/ceph/pull/23499), Matt Benjamin)
- tests: Excluded ‘python34-cephfs’ from the install tasks ([pr#24650](https://github.com/ceph/ceph/pull/24650), Yuri Weinstein)
- tests: Use pids instead of jobspecs which were wrong ([issue#27056](http://tracker.ceph.com/issues/27056), [pr#23901](https://github.com/ceph/ceph/pull/23901), David Zafman)
- tests: cephfs: multifs requires 4 mds but gets only 2 ([issue#24899](http://tracker.ceph.com/issues/24899), [pr#24328](https://github.com/ceph/ceph/pull/24328), Patrick Donnelly)
- tests: cls\_rgw test is only run in rados suite: add it to rgw suite as well ([issue#24815](http://tracker.ceph.com/issues/24815), [pr#24070](https://github.com/ceph/ceph/pull/24070), Casey Bodley, Sage Weil)
- tests: librbd: not valid to have different parents between image snapshots ([issue#36097](http://tracker.ceph.com/issues/36097), [pr#24245](https://github.com/ceph/ceph/pull/24245), Jason Dillaman)
- tests: move mds/client config to qa from teuthology ceph.conf.template ([issue#26900](http://tracker.ceph.com/issues/26900), [issue#24839](http://tracker.ceph.com/issues/24839), [pr#23877](https://github.com/ceph/ceph/pull/23877), Patrick Donnelly)
- tests: qa/tasks: s3a fix mirror ([pr#24039](https://github.com/ceph/ceph/pull/24039), Vasu Kulkarni)
- tests: qa/workunits: replace ‘realpath’ with ‘readlink -f’ in fsstress.sh ([issue#27211](http://tracker.ceph.com/issues/27211), [issue#36409](http://tracker.ceph.com/issues/36409), [pr#24620](https://github.com/ceph/ceph/pull/24620), Ilya Dryomov, Jason Dillaman)
- tests: qa: add .qa helper link ([pr#24134](https://github.com/ceph/ceph/pull/24134), Patrick Donnelly)
- tests: qa: added v12.2.8 to the mix ([issue#35541](http://tracker.ceph.com/issues/35541), [pr#23913](https://github.com/ceph/ceph/pull/23913), Yuri Weinstein)
- tests: remove knfs qa suite from future releases ([issue#36075](http://tracker.ceph.com/issues/36075), [pr#24268](https://github.com/ceph/ceph/pull/24268), Yuri Weinstein)
- tools: ceph-objectstore-tool: Allow target level as first positional parameter ([issue#35846](http://tracker.ceph.com/issues/35846), [pr#24115](https://github.com/ceph/ceph/pull/24115), David Zafman)
